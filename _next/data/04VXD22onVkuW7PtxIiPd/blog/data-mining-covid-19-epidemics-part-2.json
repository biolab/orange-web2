{"pageProps":{"frontmatter":{"author":"Robert Cvitkovič","date":"2020-04-13","draft":false,"title":"Data Mining COVID-19 Epidemics: Part 2","type":"blog","thumbImage":"2020-04-09-choropleth.png","frontPageImage":"2020-04-09-choropleth.png","blog":["covid-19","visualization","addons","geo","time"],"shortExcerpt":"Visualizing COVID-19 data using maps.","longExcerpt":"Visualizing COVID-19 data using area and point maps and interactive timeseries."},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    h2: \"h2\",\n    em: \"em\",\n    strong: \"strong\",\n    h3: \"h3\",\n    hr: \"hr\"\n  }, _provideComponents(), props.components), {Figure, WorkflowScreenshot, WindowScreenshot, Video} = _components;\n  if (!Figure) _missingMdxReference(\"Figure\", true);\n  if (!Video) _missingMdxReference(\"Video\", true);\n  if (!WindowScreenshot) _missingMdxReference(\"WindowScreenshot\", true);\n  if (!WorkflowScreenshot) _missingMdxReference(\"WorkflowScreenshot\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"Previously on \", _jsx(_components.a, {\n        href: \"https://orange.biolab.si/blog/2020/2020-04-02-covid-19-basic/\",\n        children: \"Data Mining COVID-19 Epidemics: Part 1\"\n      }), \" we fired up a COVID-19 epidemics data set and looked at some basic visualizations. If you haven't got your hands dirty with it yet, check that out first.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In this post, we'll try putting the data on a map. We'll also expand on the \\\"data mining is interactive\\\" mantra by creating some animations showing the epidemics spread throughout the world.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Prerequisite: installing add-ons\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Orange already comes with a great selection of widgets that work with all sorts of data. But sometimes we're faced with a particular data set, such as textual data, time-series, or geographical data, which requires widgets with specific functionality – add-ons to the rescue! Add-ons are packages of widgets specially designed to handle specific data types.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We'll be working with the Geo and Timeseries add-ons. To install them, open \", _jsx(_components.em, {\n        children: \"Options\"\n      }), \" in the menu bar and select \", _jsx(_components.em, {\n        children: \"Add-ons\"\n      }), \". A new window will open, showing a list of officially supported add-ons. Select Orange3-Geo and Orange3-TimeSeries and click \", _jsx(_components.em, {\n        children: \"OK\"\n      }), \". After installation,  restart Orange. Check out the new sections in the widget toolbox; you should see some cool new widgets.\"]\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-install-addon.png\",\n      width: \"652\",\n      height: \"612\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-install-addon.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Note:\"\n      }), \" the two add-ons have been revamped very recently. If you already have them, use the Add-ons dialog to upgrade them to the latest version.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"From Scatter Plot to Geo Map\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You should already be familiar with the Scatter Plot widget. In the previous blog post, we used it as an impromptu map by putting latitude and longitude on the axes.\"\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-scatter-plot.png\",\n      width: \"1435\",\n      height: \"811\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-scatter-plot.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"A better solution is to use Geo Map from the Orange3-Geo add-on. It provides a variety of maps as backgrounds. With them, it's much easier to associate points with locations. To start, first load the \", _jsx(_components.a, {\n        href: \"https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv\",\n        children: \"COVID-19 data set\"\n      }), \" using the File widget, \", _jsx(_components.a, {\n        href: \"https://orange.biolab.si/blog/2020/2020-04-02-covid-19-basic/\",\n        children: \"as shown in the previous post\"\n      }), \". Then, add and connect a Geo Map widget.\"]\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-01.png\",\n      width: \"237\",\n      height: \"125\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-01.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Latitude and longitude are automatically selected. Below, you can define similar point properties, as in the scatter plot. The size of a point can intuitively represent the number of cases, so let's select the latest date in the \", _jsx(_components.em, {\n        children: \"Size\"\n      }), \" dropdown. If you're feeling adventurous, try changing the map type to satellite or topological.\"]\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-full-geomap.png\",\n      width: \"1368\",\n      height: \"905\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-full-geomap.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Just like in Scatter Plot, you can scroll to zoom in and out, and click/drag to select data points. As opposed to using Scatter Plot, showing the points over a map of Europe makes it easier to select the countries we want to inspect.\"\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-eu-geomap.png\",\n      width: \"1362\",\n      height: \"897\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-eu-geomap.webp\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"The chloro... chorophl... chloropet... map with areas colored in\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The map is nice and informative, and it's easy to distinguish larger epidemics from smaller ones. Still, those similarly-sized points on the map represent entire countries from big Russia to small Slovenia. We could, alternatively, represent countries by coloring their surface area. This is a job for Choropleth Map. Let's add it and connect it.\"\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-02.png\",\n      width: \"243\",\n      height: \"130\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-02.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This widget is similar to Geo Map, but instead of displaying data as points, it aggregates them into regions (e.g., Country, State, Province), and displays those instead. Under \", _jsx(_components.em, {\n        children: \"Attribute\"\n      }), \", select the latest date and under \", _jsx(_components.em, {\n        children: \"Agg.\"\n      }), \", select \", _jsx(_components.em, {\n        children: \"sum\"\n      }), \". The colored regions now show the sum of confirmed COVID-19 cases for each country.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Try choosing different dates. Notice how China initially experiences rapid growth, followed by a period of stagnation, and how in the past week, the USA overtook all other countries' confirmed COVID-19 case count.\"\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-choropleth.png\",\n      width: \"1354\",\n      height: \"891\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-choropleth.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"A warning that \", _jsx(_components.em, {\n        children: \"7 points are not in any region\"\n      }), \" refers to some small islands and cruise ships included in the data.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"If a picture paints a thousand words, an animation paints a million\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"When working with time-series data, the coolest insights arise from observing trends – how data changes depending on time. Let's animate our maps!\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We'll be using a special widget from Orange3-Timeseries: Time Slice, which lets you select data in a time window. It also features a playback function that slowly moves the time window, outputting corresponding data as it goes.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Transpose: part I\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Time Slice requires time instances in the form of rows, while our data specifies them in columns. Let's start again with the File widget that loads the data. Move \", _jsx(_components.em, {\n        children: \"Lat\"\n      }), \" and \", _jsx(_components.em, {\n        children: \"Long\"\n      }), \" to meta attributes by double-clicking  \", _jsx(_components.em, {\n        children: \"feature\"\n      }), \" in the \", _jsx(_components.em, {\n        children: \"Role\"\n      }), \" column and selecting \", _jsx(_components.em, {\n        children: \"meta\"\n      }), \". This will tell Orange to exclude them from data manipulations.\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-file.gif\",\n      width: \"600\",\n      height: \"590\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-file.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To flip rows and columns, we use the Transpose widget. Connect it to the File widget.\"\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-03.png\",\n      width: \"233\",\n      height: \"116\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-03.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Set \", _jsx(_components.em, {\n        children: \"From variable\"\n      }), \" to \", _jsx(_components.em, {\n        children: \"Country/Region\"\n      }), \". Ignore the warning that indices were added to variables with the same name; it won't hurt us.\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-transpose-1.png\",\n      width: \"226\",\n      height: \"296\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-transpose-1.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To better understand what just happened, connect a Data Table to Transpose and see the result: rows and columns were swapped. Columns are named after countries (because we chose \", _jsx(_components.em, {\n        children: \"Country/Region\"\n      }), \" in the Transpose widget), while a new column, \", _jsx(_components.em, {\n        children: \"Feature name\"\n      }), \", contains the original names of the columns.\"]\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-table-1.png\",\n      width: \"1179\",\n      height: \"671\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-table-1.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Right now, Orange is treating values in \", _jsx(_components.em, {\n        children: \"Feature name\"\n      }), \" as strings. We need to tell Orange that the feature contains timestamps. Let's connect an Edit Domain widget.\"]\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-04.png\",\n      width: \"378\",\n      height: \"116\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-04.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Scroll to the bottom of \", _jsx(_components.em, {\n        children: \"Variables\"\n      }), \" and select \", _jsx(_components.em, {\n        children: \"Feature name\"\n      }), \". In \", _jsx(_components.em, {\n        children: \"Edit\"\n      }), \", change its type to \", _jsx(_components.em, {\n        children: \"Time\"\n      }), \". While you're at it, change its name to something meaningful, like \", _jsx(_components.em, {\n        children: \"date\"\n      }), \". Finally, click \", _jsx(_components.em, {\n        children: \"Apply\"\n      })]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-edit-domain.gif\",\n      width: \"660\",\n      height: \"660\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-edit-domain.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The data is now ready to be processed by Time Slice.\"\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-05.png\",\n      width: \"505\",\n      height: \"120\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-05.webp\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-time-slice.png\",\n      width: \"514\",\n      height: \"504\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-time-slice.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The top indicates the currently selected slice of data. You can change the interval by interacting with the histogram, or by adjusting the start and end dates directly below. Let's select a day's slice between the 25th and 26th January 2020.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"With a click of the play button, the slice moves, and the data output updates accordingly. To verify that it works, connect a Data Table, and see it in action.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Transpose: part II\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Make sure to stop the Time Slice playback before proceeding. We're almost at the finish line; we just need to transform the data back into its original form. To do so, connect another Transpose widget.\"\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-06.png\",\n      width: \"660\",\n      height: \"131\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-06.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Under \", _jsx(_components.em, {\n        children: \"Future names\"\n      }), \" select \", _jsx(_components.em, {\n        children: \"Generic\"\n      }), \", which will name the new column \", _jsx(_components.em, {\n        children: \"Feature 1\"\n      }), \".\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-transpose-2.png\",\n      width: \"236\",\n      height: \"303\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-transpose-2.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Let's connect a Data Table for a final check of our data before putting it on a map.\"\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-table-2.png\",\n      width: \"997\",\n      height: \"654\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-table-2.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Looking good!\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The final step entails connecting the Choropleth Map, selecting \", _jsx(_components.em, {\n        children: \"Feature 1\"\n      }), \" as \", _jsx(_components.em, {\n        children: \"Attribute\"\n      }), \", and \", _jsx(_components.em, {\n        children: \"Sum\"\n      }), \" as the \", _jsx(_components.em, {\n        children: \"Agg\"\n      }), \".\"]\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-07.png\",\n      width: \"787\",\n      height: \"121\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-07.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"To observe the animation, open up both Choropleth and Time Slice at the same time.\", _jsx(\"br\", {}), \"\\nProtip: pressing Ctrl/CMD+Up reveals the workflow, Ctrl/CMD+Down reveals widget windows.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"All that's left is to hit play.\"\n    }), \"\\n\", _jsx(Video, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-animation-choropleth.mp4\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now that we're familiar with Time Slice, let's use it with Geo Map too. For bonus points, let's also remove countries with zero confirmed cases. That way, the number of points on the map will increase as the virus spreads throughout the world. For this, we'll use a Select Rows widget.\"\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-08.png\",\n      width: \"903\",\n      height: \"140\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-08.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Under Conditions, select \", _jsx(_components.em, {\n        children: \"Feature 1\"\n      }), \", select \", _jsx(_components.em, {\n        children: \"is greater than\"\n      }), \", and type in \", _jsx(_components.em, {\n        children: \"0\"\n      }), \".\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-select-rows.gif\",\n      width: \"600\",\n      height: \"436\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-select-rows.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Add and connect a Geo Map widget. Zoom out, so you see the whole world, and on the left side, check \", _jsx(_components.em, {\n        children: \"Freeze map\"\n      }), \". This will prevented the map from jumping around as new points are added.\"]\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-09.png\",\n      width: \"924\",\n      height: \"144\",\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-workflow-09.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Press play once again – let's see what we've built!\"\n    }), \"\\n\", _jsx(Video, {\n      src: \"/blog/2020-04-covid-19-part-2/2020-04-09-animation-geomap.mp4\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Where from here?\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In the blog, we explained how to turn Orange into an interactive data exploration tool for COVID-19 data! With a few widgets we were able to determine the change in time for the confirmed cases and plot the results on a map.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Time Slice isn't the only widget in the Orange3-Timeseries add-on. Stay tuned for next week's blog, where we'll delve deeper into the patterns emerging from time-series data.\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsxs(_components.p, {\n      children: [\"Orange is a multi-platform open-source machine learning and data visualization tool for beginners and experts alike. \", _jsx(_components.a, {\n        href: \"https://orange.biolab.si/download\",\n        children: \"Download Orange\"\n      }), \", and load and explore your own data sets!\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In addition to a variety of learning materials posted online in the form of\\n\", _jsx(_components.a, {\n        href: \"https://orange.biolab.si/blog/\",\n        children: \"blog posts\"\n      }), \", \", _jsx(_components.a, {\n        href: \"https://www.youtube.com/playlist?list=PLmNPvQr9Tf-ZSDLwOzxpvY-HrE0yv-8Fy\",\n        children: \"tutorial videos\"\n      }), \", we've created a Discord server. \", _jsx(_components.a, {\n        href: \"https://discord.gg/FWrfeXV\",\n        children: \"Join the community, tell us what you think!\"\n      })]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true}