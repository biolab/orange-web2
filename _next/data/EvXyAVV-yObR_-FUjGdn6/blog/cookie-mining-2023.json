{"pageProps":{"frontmatter":{"author":"Bla≈æ Zupan","date":"2023-12-22","draft":false,"title":"Cookie Mining","url":"cookie-mining-2023","thumbImage":"cookie-mining-thumb.jpg","frontPageImage":"cookie-mining-thumb.jpg","blog":["text mining","images"],"shortExcerpt":"A companion to our Orange Data Mining Holiday Special video on how we mined cookie descriptions and how to create cookie clustering.","longExcerpt":"A companion to our Orange Data Mining Holiday Special video on how we mined cookie descriptions and how to create cookie clustering."},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    ol: \"ol\",\n    li: \"li\",\n    h2: \"h2\",\n    strong: \"strong\"\n  }, _provideComponents(), props.components), {WindowScreenshot} = _components;\n  if (!WindowScreenshot) _missingMdxReference(\"WindowScreenshot\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"We just released a \", _jsx(_components.a, {\n        href: \"https://www.youtube.com/watch?v=UMGY9Uf3I6g&list=PLmNPvQr9Tf-Yirm1aN3kHGnhMofrLmEy7&index=4\",\n        children: \"video\"\n      }), \" about cookie mining. Yes, mining data from cookies. The video goes through the technicalities rather quickly and deliberately doesn't dive into the intricacies of Orange - it's Christmas time and we're focusing on cookies. To accompany the video, here is a blog that dives into the workflow we used and explains its inner workings.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To replicate our cookie mining, you will need:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Orange, :)\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Orange's Text, Image Analytics, and Prototypes add-ons installed (currently, ChatGPT widgets are in the Prototypes add-on),\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"the \", _jsx(_components.a, {\n          href: \"http://file.biolab.si/datasets/2023-cookies.xlsx\",\n          children: \"cookie data file\"\n        }), \" with a list of cookie names,\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"the \", _jsx(_components.a, {\n          href: \"http://file.biolab.si/datasets/2023-cookies.zip\",\n          children: \"images of cookies\"\n        }), \",\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"OpenAI's API key to the ChatGPT. Alternatively, you can start with the \", _jsx(_components.a, {\n          href: \"http://file.biolab.si/datasets/2023-cookies-w-description.xlsx\",\n          children: \"data file\"\n        }), \" which already contains cookie descriptions and bypass the use of the ChatGPT Constructor widget.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Here is the workflow we constructed in \", _jsx(_components.a, {\n        href: \"https://www.youtube.com/watch?v=UMGY9Uf3I6g&list=PLmNPvQr9Tf-Yirm1aN3kHGnhMofrLmEy7&index=4\",\n        children: \"the video\"\n      }), \":\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/workflow.png\",\n      width: \"631\",\n      height: \"335\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/workflow.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The workflow consist of three mail branches.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"1. Cookie Description Embedding and Clustering\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In the top branch, which starts with a File widget, we load the cookie names from \", _jsx(_components.a, {\n        href: \"http://file.biolab.si/datasets/2023-cookies.xlsx\",\n        children: \"the Excel file\"\n      }), \" and pass them to the ChatGPT Constructor. This takes the cookie name, one line at a time, and constructs a ChatGPT prompt, where the start of the prompt is the text we entered in the ChatGPT Constructor, followed by the cookie name attribute from the data file. The output of ChatGPT Constructor is then a data table with an extra row containing cookie descriptions.Here is the workflow and widgets that illustrate this part of our cookie analysis pipeline.\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/cookie-description.png\",\n      width: \"848\",\n      height: \"620\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/cookie-description.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Some cookie descriptions are long, and we can read them more easily in the Corpus Viewer. To use it, we need to mark that our data table contains the text corpus and specify that the text we want to mine is stored in the \\\"Text\\\" attribute, i.e. the attribute constructed by the ChatGPT Constructor.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/corpus.png\",\n      width: \"848\",\n      height: \"428\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/corpus.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We pass the corpus data to the Document Embedding widget, where we use BERT sentence embedding to describe each cookie description with its embedding, i.e. with a numeric vector. Then we use the Data Table widget to check the result of the embedding.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/embedding.png\",\n      width: \"756\",\n      height: \"416\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/embedding.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Note that while we set the ChatGPT temperature parameter to 0, which tells ChatGPT to always choose the most likely word when constructing a text sequence, ChatGPT would still randomly choose the best continuation among the top-ranked equally likely words. Since we cannot control the random seeds in ChatGPT, this means that you may get slightly different cookie descriptions than ours, and there is no way to exactly replicate our results.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We feed the cookie embedding into the hierarchical clustering pipeline, which must first estimate the pairwise cookie distances and then feed the distances into the Hierarchical Clustering widget. We used cosine distance and Ward linkage.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/clustering.png\",\n      width: \"786\",\n      height: \"494\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/clustering.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"If you are like me, cookie names alone would not tell you much. We need cookie images! Our goal is to be able to select a cookie cluster and see what those cookies actually look like.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"2. Cluster Exploration with Images\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We have prepared a folder with images of our cookies and conveniently named the files with the cookie names.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/folder.png\",\n      width: \"264\",\n      height: \"190\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/folder.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We can load the cookie images into Orange with the Import Images widget and check the loaded data with the Image Viewer widget.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/images.png\",\n      width: \"736\",\n      height: \"484\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/images.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"They all look great! Cookies, I mean :). Note that Orange does not carry images with the data at all, but instead constructs the data table when using Import Images, which stores the location of image files in one of the fields. These locations are then used by the image viewer when displaying images. We can also check if this is indeed the case by observing the data passed by the Import Images widget, as I have done below.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/image-data.png\",\n      width: \"602\",\n      height: \"248\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/image-data.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"We are now ready to merge the text data with the image data. We will do this after the text embedding and tell the Merge Data widget to match the rows of the two files using the cookie name attribute from the text record and the image name attribute from the image record.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/merge.png\",\n      width: \"413\",\n      height: \"389\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/merge.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now, with the merged dataset, we can do the clustering and observe the images of the cookie groups. We can also try to summarize the descriptions of the cookies selected in the dendrogram.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/cluster-explanation.png\",\n      width: \"774\",\n      height: \"416\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/cluster-explanation.png\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Oh, joy! A visual browser of the cookie world!\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"As a final touch, we can ask the ChatGPT Summarize widget to construct a summary from all the descriptions of the cookies we selected in the hierarchical clustering dendrogram.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/summarize.png\",\n      width: \"859\",\n      height: \"544\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/summarize.png\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"3. Cookie Wish and Nearest Neighbors in the Cookie Vector Space\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"There's only one piece left. Write a wish and figure out which cookie is the best match. To write the wish, we use Create Corpus. We pass the text to the document embedding widget, and then find nearest neighbors in the cookie description embedding space. Again, we use cosine distance and limit the number of neighbors to three. Finally, we use the Image Viewer to display the images of the cookies whose description best matches the text we wrote in Create Corpus.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/neighbors.png\",\n      width: \"658\",\n      height: \"540\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/neighbors.png\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"And that's it. This was not the easiest workflow, but we hope you enjoyed it and especially \", _jsx(_components.a, {\n        href: \"https://www.youtube.com/watch?v=UMGY9Uf3I6g&list=PLmNPvQr9Tf-Yirm1aN3kHGnhMofrLmEy7&index=4\",\n        children: \"the video\"\n      }), \". There, on YouTube, do not forget to \", _jsx(_components.a, {\n        href: \"https://www.youtube.com/orangedatamining\",\n        children: \"subscribe to our Orange Data Mining channel\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.strong, {\n        children: \"Merry Christmas and a Happy New Year!\"\n      })\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-12-cookie-mining-2023/just-cookies.png\",\n      width: \"838\",\n      height: \"288\",\n      src: \"/blog/2023-12-cookie-mining-2023/__optimized-images__/just-cookies.png\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}},"thumbImage":{"width":512,"height":512,"src":"/blog/2023-12-cookie-mining-2023/__optimized-images__/cookie-mining-thumb.jpg"}},"__N_SSG":true}