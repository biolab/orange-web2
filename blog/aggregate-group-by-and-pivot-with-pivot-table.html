<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Orange Data Mining</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/media/0ac14a3c407fb3c4-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/fc6fba7ce0876fef-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/3cc61a2a1d48cb85-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/b49f75c2c957040b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b49f75c2c957040b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/4ac7ed34d61ef456.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4ac7ed34d61ef456.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-880e48e2fc817058.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-321f842b3cd96ae0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-585f99e2415388ec.js" defer=""></script><script src="/_next/static/chunks/815-30d73934dc079aab.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-a35f58a86a6a95b8.js" defer=""></script><script src="/_next/static/fab-_FRCRjKmUMDqPvmb3/_buildManifest.js" defer=""></script><script src="/_next/static/fab-_FRCRjKmUMDqPvmb3/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.6">.cuimeM{position:relative;max-width:1296px;margin-right:auto;margin-left:auto;padding-left:72px;padding-right:72px;height:100%;box-sizing:content-box;}/*!sc*/
@media (max-width:1130px){.cuimeM{padding-left:30px;padding-right:30px;}}/*!sc*/
@media (max-width:720px){.cuimeM{padding-left:15px;padding-right:15px;}}/*!sc*/
.fZOHgH{position:relative;max-width:1296px;margin-right:auto;margin-left:auto;padding-left:72px;padding-right:72px;height:100%;box-sizing:content-box;max-width:714px;}/*!sc*/
@media (max-width:1130px){.fZOHgH{padding-left:30px;padding-right:30px;}}/*!sc*/
@media (max-width:720px){.fZOHgH{padding-left:15px;padding-right:15px;}}/*!sc*/
data-styled.g1[id="sc-36970a51-0"]{content:"cuimeM,fZOHgH,"}/*!sc*/
.fYoBKL{position:relative;display:inline-block;max-width:100%;font-size:20px;line-height:1.25;font-weight:600;-webkit-text-decoration:none;text-decoration:none;color:#fff;padding:10px 15px;border-radius:5px;background-image:linear-gradient(180deg,#FE7A00 74.93%,#F65D18 100%);box-shadow:0px 10px 10px rgba(0,0,0,0.03);background-size:100%;cursor:pointer;z-index:2;}/*!sc*/
.fYoBKL:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background-image:linear-gradient(180deg,#ffbc44 100%,#FE7A00 100%);opacity:0;z-index:-100;-webkit-transition:opacity 0.45s;transition:opacity 0.45s;}/*!sc*/
.fYoBKL:hover{color:#fff;}/*!sc*/
.fYoBKL:hover:before{opacity:1;}/*!sc*/
data-styled.g2[id="sc-e429b959-0"]{content:"fYoBKL,"}/*!sc*/
.ikuqzB{background:#1F1F1F;padding:38px 0 25px;color:#fff;}/*!sc*/
data-styled.g3[id="sc-7afe78da-0"]{content:"ikuqzB,"}/*!sc*/
.hrSlzr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-column-gap:80px;column-gap:80px;row-gap:40px;margin-bottom:40px;}/*!sc*/
.hrSlzr h3{font-size:16px;font-weight:600;margin-bottom:12px;}/*!sc*/
.hrSlzr li + li{margin-top:12px;}/*!sc*/
data-styled.g4[id="sc-7afe78da-1"]{content:"hrSlzr,"}/*!sc*/
.eWdALT{display:none;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:44px;height:34px;padding:6px;border-radius:5px;border:none;background:linear-gradient(180deg,#FE7A00 74.93%,#F65D18 100%);box-shadow:0px 10px 10px rgba(0,0,0,0.03);cursor:pointer;margin-left:auto;}/*!sc*/
@media (max-width:920px){.eWdALT{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
.eWdALT div{width:22px;height:2px;background:#fff;-webkit-transform-origin:1px;-ms-transform-origin:1px;transform-origin:1px;-webkit-transition:all 0.3s linear;transition:all 0.3s linear;}/*!sc*/
data-styled.g5[id="sc-46d6b9d9-0"]{content:"eWdALT,"}/*!sc*/
.jTcDmc{-webkit-clip:rect(0 0 0 0);clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;}/*!sc*/
data-styled.g6[id="sc-cdea7863-0"]{content:"jTcDmc,"}/*!sc*/
.gPgccM{position:fixed;top:0;left:0;width:100%;height:80px;z-index:5;background:#fff;box-shadow:0px 4px 10px 4px rgba(0,0,0,0.04);}/*!sc*/
data-styled.g7[id="sc-6852f5f6-0"]{content:"gPgccM,"}/*!sc*/
.jrLPNu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}/*!sc*/
.jrLPNu .img-logo{width:115px;}/*!sc*/
data-styled.g8[id="sc-6852f5f6-1"]{content:"jrLPNu,"}/*!sc*/
.hzGhxs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:920px){.hzGhxs{display:block;position:absolute;top:80px;left:0;width:100%;z-index:1;padding:0 30px 30px;background-color:#fff;opacity:0;z-index:-9999;pointer-events:none;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;box-shadow:0 4px 10px -1px rgba(0,0,0,0.04);}}/*!sc*/
@media (max-width:720px){.hzGhxs{padding:0 15px 15px;}}/*!sc*/
data-styled.g9[id="sc-6852f5f6-2"]{content:"hzGhxs,"}/*!sc*/
.chSgxF{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:920px){.chSgxF{display:block;margin-bottom:15px;}}/*!sc*/
.chSgxF li + li{margin-left:26px;}/*!sc*/
@media (max-width:920px){.chSgxF li + li{margin-left:0;}}/*!sc*/
.chSgxF a{display:inline-block;font-size:1.25rem;line-height:1;color:#000000;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.3s;transition:color 0.3s;}/*!sc*/
.chSgxF a:hover{color:#FE7A00;}/*!sc*/
@media (max-width:920px){.chSgxF a{padding:8px 0;}}/*!sc*/
data-styled.g10[id="sc-6852f5f6-3"]{content:"chSgxF,"}/*!sc*/
.hTbjmy{position:relative;width:160px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:width 0.3s ease-in-out;transition:width 0.3s ease-in-out;margin-left:26px;}/*!sc*/
@media (max-width:920px){.hTbjmy{width:auto;margin-left:0;}}/*!sc*/
data-styled.g11[id="sc-6852f5f6-4"]{content:"hTbjmy,"}/*!sc*/
.kzOElI{display:inline-block;position:absolute;top:0;right:42px;width:calc(100% - 42px);height:100%;font-size:16px;line-height:1.25;padding:10px 13px;background:#fff;border-radius:5px 0px 0px 5px;border:1px solid #D9D9D9;border-right:none;-webkit-transition:width 0.3s ease-in-out;transition:width 0.3s ease-in-out;}/*!sc*/
@media (max-width:920px){.kzOElI{display:none;}}/*!sc*/
.kzOElI::-webkit-input-placeholder{color:#D9D9D9;}/*!sc*/
.kzOElI::-moz-placeholder{color:#D9D9D9;}/*!sc*/
.kzOElI:-ms-input-placeholder{color:#D9D9D9;}/*!sc*/
.kzOElI::placeholder{color:#D9D9D9;}/*!sc*/
data-styled.g12[id="sc-6852f5f6-5"]{content:"kzOElI,"}/*!sc*/
.dSfmcG{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#fff;margin-left:auto;-webkit-flex:0 0 42px;-ms-flex:0 0 42px;flex:0 0 42px;height:41px;border:1px solid #474747;border-radius:0px 5px 5px 0px;background-color:#474747;}/*!sc*/
@media (max-width:920px){.dSfmcG{margin-left:0;}}/*!sc*/
data-styled.g13[id="sc-6852f5f6-6"]{content:"dSfmcG,"}/*!sc*/
*,*:before,*:after{box-sizing:border-box;-webkit-font-smoothing:antialiased;}/*!sc*/
html,body{height:100%;margin:0;}/*!sc*/
html{font-family:'Source Sans Pro',sans-serif;font-weight:400;color:#000000;}/*!sc*/
body{background:#fff;}/*!sc*/
body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:normal;}/*!sc*/
main{padding-top:80px;}/*!sc*/
ol,ul{list-style:none;}/*!sc*/
figure{margin:0;}/*!sc*/
img,video{display:block;max-width:100%;height:auto;}/*!sc*/
a{color:unset;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
a:hover{color:unset;}/*!sc*/
strong{font-weight:600;}/*!sc*/
pre{display:block;padding:10px 14px;margin:0 0 10px;font-size:18px;line-height:1.42857143;word-break:break-all;word-wrap:break-word;color:#000;background-color:#f5f5f5;border-radius:5px;overflow-x:auto;word-wrap:normal;}/*!sc*/
pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0;}/*!sc*/
code{font-family:Menlo,Monaco,Consolas,"Courier New",monospace;padding:2px 4px;font-size:90%;color:#c7254e;background-color:#f9f2f4;white-space:nowrap;border-radius:4px;white-space:pre-wrap;}/*!sc*/
::selection{background-color:#FE7A00;color:#fff;}/*!sc*/
.lg-container .lg-backdrop.in{opacity:0.75;}/*!sc*/
.lg-container .lg-toolbar.lg-group,.lg-container .lg-outer .lg-thumb-outer{background:rgba(0,0,0,0.45);}/*!sc*/
data-styled.g18[id="sc-global-exMkeD1"]{content:"sc-global-exMkeD1,"}/*!sc*/
.cXdfZy{font-size:62px;line-height:1.04;font-weight:700;color:#fff;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.cXdfZy{font-size:50px;}}/*!sc*/
@media (max-width:720px){.cXdfZy{font-size:42px;}}/*!sc*/
data-styled.g19[id="sc-4d34df46-0"]{content:"cXdfZy,"}/*!sc*/
.htQmXI h1{font-size:44px;line-height:1.13;font-weight:700;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.htQmXI h1{font-size:38px;}}/*!sc*/
@media (max-width:720px){.htQmXI h1{font-size:32px;}}/*!sc*/
.htQmXI h2{font-size:33px;line-height:1.13;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.htQmXI h2{font-size:30px;}}/*!sc*/
@media (max-width:720px){.htQmXI h2{font-size:26px;}}/*!sc*/
.htQmXI h3{font-size:28px;line-height:1.18;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.htQmXI h3{font-size:26px;}}/*!sc*/
@media (max-width:720px){.htQmXI h3{font-size:24px;}}/*!sc*/
.htQmXI h4{font-size:22px;line-height:1.18;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:720px){.htQmXI h4{font-size:20px;}}/*!sc*/
.htQmXI p{font-size:22px;line-height:1.36;color:#1F1F1F;}/*!sc*/
@media (max-width:1130px){.htQmXI p{font-size:20px;}}/*!sc*/
@media (max-width:920px){.htQmXI p{font-size:18px;}}/*!sc*/
.htQmXI ul,.htQmXI ol{padding-left:40px;}/*!sc*/
.htQmXI ul li,.htQmXI ol li{font-size:22px;line-height:1.36;color:#1F1F1F;}/*!sc*/
@media (max-width:1130px){.htQmXI ul li,.htQmXI ol li{font-size:20px;}}/*!sc*/
@media (max-width:920px){.htQmXI ul li,.htQmXI ol li{font-size:18px;}}/*!sc*/
.htQmXI ul li + li,.htQmXI ol li + li{margin-top:4px;}/*!sc*/
.htQmXI ul{list-style:disc;}/*!sc*/
.htQmXI ol{list-style:decimal;}/*!sc*/
.htQmXI p a,.htQmXI li a{color:#FE7A00;}/*!sc*/
.htQmXI p a:hover,.htQmXI li a:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
.htQmXI * + *:not(li,a){margin-top:15px;}/*!sc*/
.htQmXI * + a[data-gallery],.htQmXI * + video{margin-top:40px;}/*!sc*/
.htQmXI a[data-gallery]{display:block;margin-bottom:40px;}/*!sc*/
.htQmXI iframe,.htQmXI video{margin-bottom:40px;}/*!sc*/
data-styled.g22[id="sc-b0f3732d-0"]{content:"htQmXI,"}/*!sc*/
.bvMqmI{padding:80px 0;}/*!sc*/
@media (max-width:920px){.bvMqmI{padding:60px 0;}}/*!sc*/
@media (max-width:720px){.bvMqmI{padding:40px 0;}}/*!sc*/
data-styled.g25[id="sc-7744d44e-0"]{content:"bvMqmI,"}/*!sc*/
.eRqErV{margin-bottom:30px;}/*!sc*/
data-styled.g26[id="sc-7744d44e-1"]{content:"eRqErV,"}/*!sc*/
.cOHiXg{position:relative;}/*!sc*/
data-styled.g27[id="sc-7744d44e-2"]{content:"cOHiXg,"}/*!sc*/
.iKdGVI{position:absolute;top:0;right:100%;width:200px;margin-right:50px;text-align:right;}/*!sc*/
@media (max-width:1130px){.iKdGVI{position:unset;width:auto;text-align:left;margin:0 0 30px 0;}}/*!sc*/
data-styled.g28[id="sc-7744d44e-3"]{content:"iKdGVI,"}/*!sc*/
.bklIux{font-size:20px;line-height:1.25;color:#1F1F1F;text-transform:capitalize;color:#837FEB;}/*!sc*/
@media (max-width:920px){.bklIux{font-size:18px;}}/*!sc*/
.jGZCEF{font-size:20px;line-height:1.25;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.jGZCEF{font-size:18px;}}/*!sc*/
data-styled.g29[id="sc-7744d44e-4"]{content:"bklIux,jGZCEF,"}/*!sc*/
</style></head><body><div id="__next"><div class="__className_ac89ad"><nav class="sc-6852f5f6-0 gPgccM"><div class="sc-36970a51-0 cuimeM"><div class="sc-6852f5f6-1 jrLPNu"><a href="/"><img alt="Orange Logo" loading="lazy" width="120" height="35" decoding="async" data-nimg="1" class="img-logo" style="color:transparent" src="/_next/static/media/logo-orange.faff1861.svg"/></a><div><button aria-label="Toggle navigation" class="sc-46d6b9d9-0 eWdALT"><div></div><div></div><div></div></button><div class="sc-6852f5f6-2 hzGhxs"><ul class="sc-6852f5f6-3 chSgxF"><li><a href="/examples">Examples</a></li><li><a href="/download">Download</a></li><li><a href="/blog">Blog</a></li><li><a href="/docs">Docs</a></li><li><a href="/workshops">Workshops</a></li></ul><form class="sc-6852f5f6-4 hTbjmy"><div class="sc-6852f5f6-5 kzOElI">Search</div><button class="sc-6852f5f6-6 dSfmcG"><img alt="Icon for search" loading="lazy" width="18" height="17" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/icon-search.459b2665.svg"/><span class="sc-cdea7863-0 jTcDmc">Search through page</span></button></form></div></div></div></div></nav><main><div class="sc-7744d44e-0 bvMqmI"><div class="sc-36970a51-0 fZOHgH"><div class="sc-7744d44e-1 eRqErV"><p class="sc-7744d44e-4 bklIux"><strong>pivot table, aggregate, data, groupby</strong></p><h1 class="sc-4d34df46-0 cXdfZy">Aggregate, Group By and Pivot with... Pivot Table!</h1></div><div class="sc-7744d44e-2 cOHiXg"><div class="sc-7744d44e-3 iKdGVI"><p class="sc-7744d44e-4 jGZCEF"><strong>Ajda Pretnar</strong></p><p class="sc-7744d44e-4 jGZCEF">Aug 27, 2019</p></div><div class="sc-b0f3732d-0 htQmXI"><div class="lg-react-element "><p>Orange recently welcomed its new Pivot Table widget, which offers functionalities for data aggregation, grouping and, well, pivot tables. The widget is a one-stop-shop for pandas&#x27; aggregate, groupby and pivot_table functions.</p>
<a href="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_workflow.webp" data-gallery="true"><img alt="" loading="lazy" width="538" height="356" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_workflow.webp"/></a>
<p>Let us see how to achieve these tasks in Orange. For all of the below examples we will be using the <em>heart_disease.tab</em> data.</p>
<h2>pandas.DataFrame.agg</h2>
<p>The first task is computing a simple mean for the column <em>age</em>.</p>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.aggregate.html">In pandas</a>:</p>
<pre><code>&gt;&gt;&gt;df[&#x27;age&#x27;].agg(&#x27;mean&#x27;)
54.43894389438944
</code></pre>
<p>In Orange:</p>
<p>In <strong>Pivot Table</strong> we set <em>Values</em> to <em>age</em> and set aggregations to <em>mean</em>. There is no way to turn off splitting by rows in Pivot Table, but the values in Total report the mean value for the chosen attribute.</p>
<a href="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_pivot-aggregate.webp" data-gallery="true"><img alt="" loading="lazy" width="670" height="525" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_pivot-aggregate.webp"/></a>
<p>An even better way to observe simple statistics is in <strong>Feature Statistics</strong> widget. The widget also reports on the mean value of each attribute with handy distributions plots included.</p>
<a href="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_feature-statistics.webp" data-gallery="true"><img alt="" loading="lazy" width="1037" height="349" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_feature-statistics.webp"/></a>
<p>Yet another way to observe a mean value is in a <strong>Box Plot</strong>.</p>
<a href="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_box-plot.webp" data-gallery="true"><img alt="" loading="lazy" width="827" height="437" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_box-plot.webp"/></a>
<h2>pandas.DataFrame.groupby</h2>
<p>The second task is grouping the data by a discrete column. Say we want to group by gender and report the mean value for each column.</p>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html">In pandas</a>:</p>
<pre><code>&gt;&gt;&gt; df.groupby([&#x27;gender&#x27;]).mean()
              age    rest SBP   ...  ST by exer.  major ves. col.  diameter narrowing
gender
female  55.721649  133.340206   ...   0.867010    0.546392          0.257732
male    53.834951  130.912621   ...   1.120874    0.732673          0.553398

[2 rows x 9 columns]
</code></pre>
<p>In Orange:</p>
<p>In <strong>Pivot Table</strong> set <em>Rows</em> to <em>gender</em> and aggregation method to <em>mean</em>. The <em>Values</em> option in this example has no effect. Now, connect <strong>Data Table</strong> to Pivot Table. Finally, reset the connections. Pivot Table outputs three types of data - Pivot Table, Filtered Data, and Grouped Data. The output we are looking for here is <em>Grouped Data</em>.</p>
<a href="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_edit-links.webp" data-gallery="true"><img alt="" loading="lazy" width="561" height="280" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_edit-links.webp"/></a>
<a href="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_pivot-groupby.webp" data-gallery="true"><img alt="" loading="lazy" width="558" height="525" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_pivot-groupby.webp"/></a>
<p>This is our data table. Exactly what we were looking for.</p>
<a href="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_groupby-data-table.webp" data-gallery="true"><img alt="" loading="lazy" width="755" height="193" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_groupby-data-table.webp"/></a>
<h2>pandas.DataFrame.pivot_table</h2>
<p>The third, final task is constructing a pivot table where rows are values of <em>diameter narrowing</em>, columns are values of <em>gender</em> and the values in cells is the mean of <em>age</em> for each subgroup. In other words, we want to see the average age of females with diameter narrowing, males with diameter narrowing, females without diameter narrowing and males without diameter narrowing.</p>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table">In pandas</a>:</p>
<pre><code>&gt;&gt;&gt; pd.pivot_table(df, values=&#x27;age&#x27;, index=[&#x27;diameter narrowing&#x27;], columns=[&#x27;gender&#x27;], aggfunc=np.mean)
gender                 female       male
diameter narrowing
0                   54.555556  51.043478
1                   59.080000  56.087719
</code></pre>
<p>In Orange:</p>
<p>In <strong>Pivot Table</strong> set <em>Rows</em> to <em>diameter narrowing</em>, <em>Columns</em> to <em>gender</em>, <em>Values</em> to <em>age</em> and aggregation method to <em>mean</em>. The widget already offers a view of the final data table, but we can also output it and use it in other Orange widgets.</p>
<a href="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_pivot-table.webp" data-gallery="true"><img alt="" loading="lazy" width="569" height="525" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-08-pivot-table/__webp-images__/2019-08-27_pivot-table.webp"/></a>
<p><strong>Pivot Table</strong> widget really versatile - like a Swiss knife for data transformation.</p></div></div></div></div></div></main><footer class="sc-7afe78da-0 ikuqzB"><div class="sc-36970a51-0 cuimeM"><div class="sc-7afe78da-1 hrSlzr"><div><h3>Orange</h3><ul><li><a href="/faq">FAQ</a></li><li><a href="/license">License</a></li><li><a href="/privacy">Privacy</a></li><li><a href="/citation">Citation</a></li><li><a href="/contact">Contact</a></li></ul></div><div><h3>Download</h3><ul><li><a href="/download#win">Windows</a></li><li><a href="/download#mac">Mac OS</a></li></ul></div><div><h3>Community</h3><ul><li><a href="https://twitter.com/OrangeDataMiner">Twitter</a></li><li><a href="https://www.facebook.com/orangedatamining">Facebook</a></li><li><a href="https://datascience.stackexchange.com/questions/tagged/orange">Stack Exchange</a></li><li><a href="https://www.youtube.com/channel/UClKKWBe2SCAEyv7ZNGhIe4g">YouTube</a></li><li><a href="https://discord.com/invite/FWrfeXV">Discord</a></li></ul></div><div><h3>Documentation</h3><ul><li><a href="/getting-started">Get started</a></li><li><a href="/widget-catalogue">Widgets</a></li><li><a href="https://orange3.readthedocs.io/projects/orange-data-mining-library/en/latest/">Scripting</a></li></ul></div><div><h3>Developers</h3><ul><li><a href="https://github.com/biolab/orange3">GitHub</a></li><li><a href="http://docs.biolab.si/3/development/">Getting started</a></li></ul></div><div><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=A76TAX87ZVR3J" target="_blank" rel="noreferrer" class="sc-e429b959-0 fYoBKL">Donate to Orange</a></div></div><p>Copyright Â© University of Ljubljana</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"author":"Ajda Pretnar","date":"2019-08-27","draft":false,"title":"Aggregate, Group By and Pivot with... Pivot Table!","type":"blog","thumbImage":"2019-08-27_pivot-preview.png","frontPageImage":"2019-08-27_pivot-preview.png","blog":["pivot table","aggregate","data","groupby"],"shortExcerpt":"Orange's brand new Pivot Table widget with many aggregation and grouping functionalities.","longExcerpt":"Orange has a brand new Pivot Table widget with many aggregation and grouping functionalities. It can be used to transform the data on-the-fly and use the output for downstream analysis."},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    em: \"em\",\n    h2: \"h2\",\n    a: \"a\",\n    pre: \"pre\",\n    code: \"code\",\n    strong: \"strong\"\n  }, _provideComponents(), props.components), {Figure} = _components;\n  if (!Figure) _missingMdxReference(\"Figure\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"Orange recently welcomed its new Pivot Table widget, which offers functionalities for data aggregation, grouping and, well, pivot tables. The widget is a one-stop-shop for pandas' aggregate, groupby and pivot_table functions.\"\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-08-pivot-table/2019-08-27_workflow.png\",\n      src: \"\",\n      width: \"538\",\n      height: \"356\",\n      src: \"/blog/2019-08-pivot-table/__webp-images__/2019-08-27_workflow.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Let us see how to achieve these tasks in Orange. For all of the below examples we will be using the \", _jsx(_components.em, {\n        children: \"heart_disease.tab\"\n      }), \" data.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"pandas.DataFrame.agg\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The first task is computing a simple mean for the column \", _jsx(_components.em, {\n        children: \"age\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.aggregate.html\",\n        children: \"In pandas\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"\u003e\u003e\u003edf['age'].agg('mean')\\n54.43894389438944\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In Orange:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In \", _jsx(_components.strong, {\n        children: \"Pivot Table\"\n      }), \" we set \", _jsx(_components.em, {\n        children: \"Values\"\n      }), \" to \", _jsx(_components.em, {\n        children: \"age\"\n      }), \" and set aggregations to \", _jsx(_components.em, {\n        children: \"mean\"\n      }), \". There is no way to turn off splitting by rows in Pivot Table, but the values in Total report the mean value for the chosen attribute.\"]\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-08-pivot-table/2019-08-27_pivot-aggregate.png\",\n      src: \"\",\n      width: \"670\",\n      height: \"525\",\n      src: \"/blog/2019-08-pivot-table/__webp-images__/2019-08-27_pivot-aggregate.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"An even better way to observe simple statistics is in \", _jsx(_components.strong, {\n        children: \"Feature Statistics\"\n      }), \" widget. The widget also reports on the mean value of each attribute with handy distributions plots included.\"]\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-08-pivot-table/2019-08-27_feature-statistics.png\",\n      src: \"\",\n      width: \"1037\",\n      height: \"349\",\n      src: \"/blog/2019-08-pivot-table/__webp-images__/2019-08-27_feature-statistics.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Yet another way to observe a mean value is in a \", _jsx(_components.strong, {\n        children: \"Box Plot\"\n      }), \".\"]\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-08-pivot-table/2019-08-27_box-plot.png\",\n      src: \"\",\n      width: \"827\",\n      height: \"437\",\n      src: \"/blog/2019-08-pivot-table/__webp-images__/2019-08-27_box-plot.webp\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"pandas.DataFrame.groupby\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The second task is grouping the data by a discrete column. Say we want to group by gender and report the mean value for each column.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.groupby.html\",\n        children: \"In pandas\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"\u003e\u003e\u003e df.groupby(['gender']).mean()\\n              age    rest SBP   ...  ST by exer.  major ves. col.  diameter narrowing\\ngender\\nfemale  55.721649  133.340206   ...   0.867010    0.546392          0.257732\\nmale    53.834951  130.912621   ...   1.120874    0.732673          0.553398\\n\\n[2 rows x 9 columns]\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In Orange:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In \", _jsx(_components.strong, {\n        children: \"Pivot Table\"\n      }), \" set \", _jsx(_components.em, {\n        children: \"Rows\"\n      }), \" to \", _jsx(_components.em, {\n        children: \"gender\"\n      }), \" and aggregation method to \", _jsx(_components.em, {\n        children: \"mean\"\n      }), \". The \", _jsx(_components.em, {\n        children: \"Values\"\n      }), \" option in this example has no effect. Now, connect \", _jsx(_components.strong, {\n        children: \"Data Table\"\n      }), \" to Pivot Table. Finally, reset the connections. Pivot Table outputs three types of data - Pivot Table, Filtered Data, and Grouped Data. The output we are looking for here is \", _jsx(_components.em, {\n        children: \"Grouped Data\"\n      }), \".\"]\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-08-pivot-table/2019-08-27_edit-links.png\",\n      src: \"\",\n      width: \"561\",\n      height: \"280\",\n      src: \"/blog/2019-08-pivot-table/__webp-images__/2019-08-27_edit-links.webp\"\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-08-pivot-table/2019-08-27_pivot-groupby.png\",\n      src: \"\",\n      width: \"558\",\n      height: \"525\",\n      src: \"/blog/2019-08-pivot-table/__webp-images__/2019-08-27_pivot-groupby.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This is our data table. Exactly what we were looking for.\"\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-08-pivot-table/2019-08-27_groupby-data-table.png\",\n      src: \"\",\n      width: \"755\",\n      height: \"193\",\n      src: \"/blog/2019-08-pivot-table/__webp-images__/2019-08-27_groupby-data-table.webp\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"pandas.DataFrame.pivot_table\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The third, final task is constructing a pivot table where rows are values of \", _jsx(_components.em, {\n        children: \"diameter narrowing\"\n      }), \", columns are values of \", _jsx(_components.em, {\n        children: \"gender\"\n      }), \" and the values in cells is the mean of \", _jsx(_components.em, {\n        children: \"age\"\n      }), \" for each subgroup. In other words, we want to see the average age of females with diameter narrowing, males with diameter narrowing, females without diameter narrowing and males without diameter narrowing.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pivot_table.html#pandas.DataFrame.pivot_table\",\n        children: \"In pandas\"\n      }), \":\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"\u003e\u003e\u003e pd.pivot_table(df, values='age', index=['diameter narrowing'], columns=['gender'], aggfunc=np.mean)\\ngender                 female       male\\ndiameter narrowing\\n0                   54.555556  51.043478\\n1                   59.080000  56.087719\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In Orange:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In \", _jsx(_components.strong, {\n        children: \"Pivot Table\"\n      }), \" set \", _jsx(_components.em, {\n        children: \"Rows\"\n      }), \" to \", _jsx(_components.em, {\n        children: \"diameter narrowing\"\n      }), \", \", _jsx(_components.em, {\n        children: \"Columns\"\n      }), \" to \", _jsx(_components.em, {\n        children: \"gender\"\n      }), \", \", _jsx(_components.em, {\n        children: \"Values\"\n      }), \" to \", _jsx(_components.em, {\n        children: \"age\"\n      }), \" and aggregation method to \", _jsx(_components.em, {\n        children: \"mean\"\n      }), \". The widget already offers a view of the final data table, but we can also output it and use it in other Orange widgets.\"]\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-08-pivot-table/2019-08-27_pivot-table.png\",\n      src: \"\",\n      width: \"569\",\n      height: \"525\",\n      src: \"/blog/2019-08-pivot-table/__webp-images__/2019-08-27_pivot-table.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.strong, {\n        children: \"Pivot Table\"\n      }), \" widget really versatile - like a Swiss knife for data transformation.\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"aggregate-group-by-and-pivot-with-pivot-table"},"buildId":"fab-_FRCRjKmUMDqPvmb3","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>