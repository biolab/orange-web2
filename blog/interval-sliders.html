<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Orange Data Mining</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/media/0ac14a3c407fb3c4-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/fc6fba7ce0876fef-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/3cc61a2a1d48cb85-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/b49f75c2c957040b.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b49f75c2c957040b.css" data-n-g=""/><link rel="preload" href="/_next/static/css/4ac7ed34d61ef456.css" as="style"/><link rel="stylesheet" href="/_next/static/css/4ac7ed34d61ef456.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-2df7a8d27de1794c.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-321f842b3cd96ae0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9917334b3f724a11.js" defer=""></script><script src="/_next/static/chunks/815-30d73934dc079aab.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-317e2716681b8fa3.js" defer=""></script><script src="/_next/static/YvzjkC3auVl_W90btJChE/_buildManifest.js" defer=""></script><script src="/_next/static/YvzjkC3auVl_W90btJChE/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.6">.iSNtvJ{position:relative;max-width:1296px;margin-right:auto;margin-left:auto;padding-left:72px;padding-right:72px;height:100%;box-sizing:content-box;}/*!sc*/
@media (max-width:1130px){.iSNtvJ{padding-left:30px;padding-right:30px;}}/*!sc*/
@media (max-width:720px){.iSNtvJ{padding-left:15px;padding-right:15px;}}/*!sc*/
.fJLXpS{position:relative;max-width:1296px;margin-right:auto;margin-left:auto;padding-left:72px;padding-right:72px;height:100%;box-sizing:content-box;max-width:714px;}/*!sc*/
@media (max-width:1130px){.fJLXpS{padding-left:30px;padding-right:30px;}}/*!sc*/
@media (max-width:720px){.fJLXpS{padding-left:15px;padding-right:15px;}}/*!sc*/
data-styled.g1[id="sc-ef15f394-0"]{content:"iSNtvJ,fJLXpS,"}/*!sc*/
.jyxOJT{position:relative;display:inline-block;max-width:100%;font-size:20px;line-height:1.25;font-weight:600;-webkit-text-decoration:none;text-decoration:none;color:#fff;padding:10px 15px;border-radius:5px;background-image:linear-gradient(180deg,#FE7A00 74.93%,#F65D18 100%);box-shadow:0px 10px 10px rgba(0,0,0,0.03);background-size:100%;cursor:pointer;z-index:2;}/*!sc*/
@media (max-width:720px){.jyxOJT{font-size:18px;}}/*!sc*/
.jyxOJT:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background-image:linear-gradient(180deg,#ffbc44 100%,#FE7A00 100%);opacity:0;z-index:-100;-webkit-transition:opacity 0.45s;transition:opacity 0.45s;}/*!sc*/
.jyxOJT:hover{color:#fff;}/*!sc*/
.jyxOJT:hover:before{opacity:1;}/*!sc*/
data-styled.g2[id="sc-b6ea565a-0"]{content:"jyxOJT,"}/*!sc*/
.iQtqNS{background:#1F1F1F;padding:38px 0 25px;color:#fff;}/*!sc*/
data-styled.g3[id="sc-c82ca4e2-0"]{content:"iQtqNS,"}/*!sc*/
.iiCJUO{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-column-gap:80px;column-gap:80px;row-gap:40px;margin-bottom:40px;}/*!sc*/
@media (max-width:720px){.iiCJUO{display:grid;grid-template-columns:1fr 1fr;-webkit-column-gap:20px;column-gap:20px;}}/*!sc*/
.iiCJUO h3{font-size:16px;font-weight:600;margin-bottom:12px;}/*!sc*/
.iiCJUO li + li{margin-top:12px;}/*!sc*/
data-styled.g4[id="sc-c82ca4e2-1"]{content:"iiCJUO,"}/*!sc*/
.eWdALT{display:none;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:44px;height:34px;padding:6px;border-radius:5px;border:none;background:linear-gradient(180deg,#FE7A00 74.93%,#F65D18 100%);box-shadow:0px 10px 10px rgba(0,0,0,0.03);cursor:pointer;margin-left:auto;}/*!sc*/
@media (max-width:920px){.eWdALT{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
.eWdALT div{width:22px;height:2px;background:#fff;-webkit-transform-origin:1px;-ms-transform-origin:1px;transform-origin:1px;-webkit-transition:all 0.3s linear;transition:all 0.3s linear;}/*!sc*/
data-styled.g5[id="sc-46d6b9d9-0"]{content:"eWdALT,"}/*!sc*/
.jTcDmc{-webkit-clip:rect(0 0 0 0);clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;}/*!sc*/
data-styled.g6[id="sc-cdea7863-0"]{content:"jTcDmc,"}/*!sc*/
.gPgccM{position:fixed;top:0;left:0;width:100%;height:80px;z-index:5;background:#fff;box-shadow:0px 4px 10px 4px rgba(0,0,0,0.04);}/*!sc*/
data-styled.g7[id="sc-6852f5f6-0"]{content:"gPgccM,"}/*!sc*/
.jrLPNu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}/*!sc*/
.jrLPNu .img-logo{width:115px;}/*!sc*/
data-styled.g8[id="sc-6852f5f6-1"]{content:"jrLPNu,"}/*!sc*/
.hzGhxs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:920px){.hzGhxs{display:block;position:absolute;top:80px;left:0;width:100%;z-index:1;padding:0 30px 30px;background-color:#fff;opacity:0;z-index:-9999;pointer-events:none;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;box-shadow:0 4px 10px -1px rgba(0,0,0,0.04);}}/*!sc*/
@media (max-width:720px){.hzGhxs{padding:0 15px 15px;}}/*!sc*/
data-styled.g9[id="sc-6852f5f6-2"]{content:"hzGhxs,"}/*!sc*/
.chSgxF{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:920px){.chSgxF{display:block;margin-bottom:15px;}}/*!sc*/
.chSgxF li + li{margin-left:26px;}/*!sc*/
@media (max-width:920px){.chSgxF li + li{margin-left:0;}}/*!sc*/
.chSgxF a{display:inline-block;font-size:1.25rem;line-height:1;color:#000000;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.3s;transition:color 0.3s;}/*!sc*/
.chSgxF a:hover{color:#FE7A00;}/*!sc*/
@media (max-width:920px){.chSgxF a{padding:8px 0;}}/*!sc*/
data-styled.g10[id="sc-6852f5f6-3"]{content:"chSgxF,"}/*!sc*/
.hTbjmy{position:relative;width:160px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:width 0.3s ease-in-out;transition:width 0.3s ease-in-out;margin-left:26px;}/*!sc*/
@media (max-width:920px){.hTbjmy{width:auto;margin-left:0;}}/*!sc*/
data-styled.g11[id="sc-6852f5f6-4"]{content:"hTbjmy,"}/*!sc*/
.kzOElI{display:inline-block;position:absolute;top:0;right:42px;width:calc(100% - 42px);height:100%;font-size:16px;line-height:1.25;padding:10px 13px;background:#fff;border-radius:5px 0px 0px 5px;border:1px solid #D9D9D9;border-right:none;-webkit-transition:width 0.3s ease-in-out;transition:width 0.3s ease-in-out;}/*!sc*/
@media (max-width:920px){.kzOElI{display:none;}}/*!sc*/
.kzOElI::-webkit-input-placeholder{color:#D9D9D9;}/*!sc*/
.kzOElI::-moz-placeholder{color:#D9D9D9;}/*!sc*/
.kzOElI:-ms-input-placeholder{color:#D9D9D9;}/*!sc*/
.kzOElI::placeholder{color:#D9D9D9;}/*!sc*/
data-styled.g12[id="sc-6852f5f6-5"]{content:"kzOElI,"}/*!sc*/
.dSfmcG{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#fff;margin-left:auto;-webkit-flex:0 0 42px;-ms-flex:0 0 42px;flex:0 0 42px;height:41px;border:1px solid #474747;border-radius:0px 5px 5px 0px;background-color:#474747;}/*!sc*/
@media (max-width:920px){.dSfmcG{margin-left:0;}}/*!sc*/
data-styled.g13[id="sc-6852f5f6-6"]{content:"dSfmcG,"}/*!sc*/
.dIeRP{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
data-styled.g18[id="sc-303bd949-0"]{content:"dIeRP,"}/*!sc*/
*,*:before,*:after{box-sizing:border-box;-webkit-font-smoothing:antialiased;}/*!sc*/
html,body{height:100%;margin:0;}/*!sc*/
html{font-family:'Source Sans Pro',sans-serif;font-weight:400;color:#000000;}/*!sc*/
body{background:#fff;}/*!sc*/
body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:normal;}/*!sc*/
main{padding-top:80px;-webkit-flex:1;-ms-flex:1;flex:1;}/*!sc*/
ol,ul{list-style:none;}/*!sc*/
figure{margin:0;}/*!sc*/
img,video{display:block;max-width:100%;height:auto;}/*!sc*/
a{color:unset;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
a:hover{color:unset;}/*!sc*/
strong{font-weight:600;}/*!sc*/
pre{display:block;padding:10px 14px;margin:0 0 10px;font-size:18px;line-height:1.42857143;word-break:break-all;word-wrap:break-word;color:#000;background-color:#f5f5f5;border-radius:5px;overflow-x:auto;word-wrap:normal;}/*!sc*/
pre code{padding:0;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0;}/*!sc*/
code{font-family:Menlo,Monaco,Consolas,"Courier New",monospace;padding:2px 4px;font-size:90%;color:#c7254e;background-color:#f9f2f4;white-space:nowrap;border-radius:4px;white-space:pre-wrap;}/*!sc*/
::selection{background-color:#FE7A00;color:#fff;}/*!sc*/
.lg-container .lg-backdrop.in{opacity:0.75;}/*!sc*/
.lg-container .lg-toolbar.lg-group,.lg-container .lg-outer .lg-thumb-outer{background:rgba(0,0,0,0.45);}/*!sc*/
data-styled.g19[id="sc-global-gFJXlm1"]{content:"sc-global-gFJXlm1,"}/*!sc*/
.cXdfZy{font-size:62px;line-height:1.04;font-weight:700;color:#fff;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.cXdfZy{font-size:50px;}}/*!sc*/
@media (max-width:720px){.cXdfZy{font-size:42px;}}/*!sc*/
data-styled.g20[id="sc-4d34df46-0"]{content:"cXdfZy,"}/*!sc*/
.htQmXI h1{font-size:44px;line-height:1.13;font-weight:700;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.htQmXI h1{font-size:38px;}}/*!sc*/
@media (max-width:720px){.htQmXI h1{font-size:32px;}}/*!sc*/
.htQmXI h2{font-size:33px;line-height:1.13;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.htQmXI h2{font-size:30px;}}/*!sc*/
@media (max-width:720px){.htQmXI h2{font-size:26px;}}/*!sc*/
.htQmXI h3{font-size:28px;line-height:1.18;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.htQmXI h3{font-size:26px;}}/*!sc*/
@media (max-width:720px){.htQmXI h3{font-size:24px;}}/*!sc*/
.htQmXI h4{font-size:22px;line-height:1.18;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:720px){.htQmXI h4{font-size:20px;}}/*!sc*/
.htQmXI p{font-size:22px;line-height:1.36;color:#1F1F1F;}/*!sc*/
@media (max-width:1130px){.htQmXI p{font-size:20px;}}/*!sc*/
@media (max-width:920px){.htQmXI p{font-size:18px;}}/*!sc*/
.htQmXI ul,.htQmXI ol{padding-left:40px;}/*!sc*/
.htQmXI ul li,.htQmXI ol li{font-size:22px;line-height:1.36;color:#1F1F1F;}/*!sc*/
@media (max-width:1130px){.htQmXI ul li,.htQmXI ol li{font-size:20px;}}/*!sc*/
@media (max-width:920px){.htQmXI ul li,.htQmXI ol li{font-size:18px;}}/*!sc*/
.htQmXI ul li + li,.htQmXI ol li + li{margin-top:4px;}/*!sc*/
.htQmXI ul{list-style:disc;}/*!sc*/
.htQmXI ol{list-style:decimal;}/*!sc*/
.htQmXI p a,.htQmXI li a{color:#FE7A00;}/*!sc*/
.htQmXI p a:hover,.htQmXI li a:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
.htQmXI * + *:not(li,a){margin-top:15px;}/*!sc*/
.htQmXI * + a[data-gallery],.htQmXI * + video{margin-top:40px;}/*!sc*/
.htQmXI a[data-gallery]{display:block;margin-bottom:40px;}/*!sc*/
.htQmXI iframe,.htQmXI video{margin-bottom:40px;}/*!sc*/
data-styled.g23[id="sc-b0f3732d-0"]{content:"htQmXI,"}/*!sc*/
.fdCCNC{display:block;margin-left:auto;margin-right:auto;}/*!sc*/
data-styled.g24[id="sc-b0f3732d-1"]{content:"fdCCNC,"}/*!sc*/
.jiUdjB{padding:80px 0;}/*!sc*/
@media (max-width:920px){.jiUdjB{padding:60px 0;}}/*!sc*/
@media (max-width:720px){.jiUdjB{padding:40px 0;}}/*!sc*/
data-styled.g26[id="sc-18ad0c3-0"]{content:"jiUdjB,"}/*!sc*/
.farhVs{margin-bottom:30px;}/*!sc*/
data-styled.g27[id="sc-18ad0c3-1"]{content:"farhVs,"}/*!sc*/
.evzqvZ{position:relative;}/*!sc*/
data-styled.g28[id="sc-18ad0c3-2"]{content:"evzqvZ,"}/*!sc*/
.kwRhph{position:absolute;top:0;right:100%;width:200px;margin-right:50px;text-align:right;}/*!sc*/
@media (max-width:1130px){.kwRhph{position:unset;width:auto;text-align:left;margin:0 0 30px 0;}}/*!sc*/
data-styled.g29[id="sc-18ad0c3-3"]{content:"kwRhph,"}/*!sc*/
.jMsRbj{font-size:20px;line-height:1.25;color:#1F1F1F;text-transform:capitalize;color:#5651EC;}/*!sc*/
@media (max-width:920px){.jMsRbj{font-size:18px;}}/*!sc*/
.cwWTdU{font-size:20px;line-height:1.25;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.cwWTdU{font-size:18px;}}/*!sc*/
data-styled.g30[id="sc-18ad0c3-4"]{content:"jMsRbj,cwWTdU,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-303bd949-0 dIeRP __className_ac89ad"><nav class="sc-6852f5f6-0 gPgccM"><div class="sc-ef15f394-0 iSNtvJ"><div class="sc-6852f5f6-1 jrLPNu"><a href="/"><img alt="Orange Logo" loading="lazy" width="120" height="35" decoding="async" data-nimg="1" class="img-logo" style="color:transparent" src="/_next/static/media/logo-orange.faff1861.svg"/></a><div><button aria-label="Toggle navigation" class="sc-46d6b9d9-0 eWdALT"><div></div><div></div><div></div></button><div class="sc-6852f5f6-2 hzGhxs"><ul class="sc-6852f5f6-3 chSgxF"><li><a href="/examples">Examples</a></li><li><a href="/download">Download</a></li><li><a href="/blog">Blog</a></li><li><a href="/docs">Docs</a></li><li><a href="/workshops">Workshops</a></li></ul><form class="sc-6852f5f6-4 hTbjmy"><div class="sc-6852f5f6-5 kzOElI">Search</div><button class="sc-6852f5f6-6 dSfmcG"><img alt="Icon for search" loading="lazy" width="18" height="17" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/icon-search.459b2665.svg"/><span class="sc-cdea7863-0 jTcDmc">Search through page</span></button></form></div></div></div></div></nav><main><div class="sc-18ad0c3-0 jiUdjB"><div class="sc-ef15f394-0 fJLXpS"><div class="sc-18ad0c3-1 farhVs"><p class="sc-18ad0c3-4 jMsRbj"><strong>development</strong></p><h1 class="sc-4d34df46-0 cXdfZy">Interval Sliders</h1></div><div class="sc-18ad0c3-2 evzqvZ"><div class="sc-18ad0c3-3 kwRhph"><p class="sc-18ad0c3-4 cwWTdU"><strong>Janez Demšar</strong></p><p class="sc-18ad0c3-4 cwWTdU">Mar 10, 2023</p></div><div class="sc-b0f3732d-0 htQmXI"><div class="lg-react-element "><a href="/blog/2023-03-interval-slider/__webp-images__/2023-03-10-heatmap.webp" data-gallery="true"><img alt="" loading="lazy" width="1326" height="962" decoding="async" data-nimg="1" class="sc-b0f3732d-1 fdCCNC" style="color:transparent" src="/blog/2023-03-interval-slider/__webp-images__/2023-03-10-heatmap.webp"/></a>
<p>This post is not about the Heat Map widget. It&#x27;s about the new double-handled slider at the top of the heatmap. Not about what it does, but about how it does it. The post should be interesting to readers with some knowledge of Qt. Others, who won&#x27;t understand it, are expected to be impressed by the complexity of implementing something as simple as adding another handle to a slider. On the other hand (wait for the pun!), this complexity is not so surprising: attaching another, fully functional hand to a human would be quite a feat, too.</p>
<h2>Why do we need it?</h2>
<p>That is, why we need another handle on slider, not another hand. (Though an extra hand would be useful, too - how cool would it be to take a sip of tea while typing?)</p>
<p>A user posted <a href="https://github.com/biolab/orange3/issues/6323">an issue</a>, which he called &quot;<em>Not a problem. More a frustration</em>&quot;. Some widgets from the Text add-on allow the user to specify a range of values, for instance for filtering, which they do with a pair of spin boxes (those controls where you can enter a number manually or change it by pressing little up and down button on their right) or a pair of sliders. He suggested using a single slider with two handles. He noted that Orange currently doesn&#x27;t have such a control in its repertoire.</p>
<p>With a bit of exaggeration, I use such sliders almost daily to specify the price range when ordering bicycle parts, tools and clothes. While I&#x27;m no stranger to such sliders, I don&#x27;t particularly like them. Entering numbers manually is much easier. But then ... they could be useful in cases where numbers are not intepretable, so sliding a handle is more natural than guessing random numbers. A good example is setting scales for color palettes: the user has no idea which particular number will make the image look good.</p>
<h2>Drawing native-looking widgets</h2>
<p>Problem: Qt doesn&#x27;t have such widget.</p>
<p>Qt is great - consistent, fast, powerful, and it has native look on all platforms. But if you want to make any small change to some element, its painting falls back to a Qt-based implementation which looks ... not only out of place but, well, ugly. See what becomes of a push button if you would, for whatever reason, want to increase its font size.</p>
<a href="/blog/2023-03-interval-slider/__webp-images__/2023-03-10-ugly-button.webp" data-gallery="true"><img alt="" loading="lazy" width="548" height="92" decoding="async" data-nimg="1" class="sc-b0f3732d-1 fdCCNC" style="color:transparent" src="/blog/2023-03-interval-slider/__webp-images__/2023-03-10-ugly-button.webp"/></a>
<p>So, can we create a double-handled slider that looks as it should? Not with some ugly square-ish handles?</p>
<p>OP provided us with a <a href="https://stackoverflow.com/a/62665367">link</a> to implementation of such a slider. Our version is different, but based on the same trick.</p>
<p>Widget is (re)painted upon receiving a <a href="https://doc.qt.io/qt-6/qwidget.html#paintEvent"><code>paintEvent</code></a>. It must construct a painter, initialize it with proper options and paint whatever needs to be painted. <code>QPushButton</code>, <code>QCheckBox</code>, <code>QLineEdit</code> ... and many other widgets must look different on different platforms. The actual painting is thus not coded within widgets, but relegated to <code>QStyle</code>. <code>QStyle</code> is however an class: the actual <code>QStyle</code> in use by the application is <a href="https://doc.qt.io/qt-6/qstyle.html#details">one of <code>QStyle</code>&#x27;s subclasses</a> for different platforms and looks.</p>
<p>For instance, <code>QPushButton.paintEvent</code> just calls <code>QStyle</code>&#x27;s <code>drawControl(QStyle.CE_PushButton, option, painter)</code>, where <code>CE_PushButton</code> is a constant giving the control to paint, option is an instance of <code>QStyleOptionButton</code> with the necessary data (the icon, text and button&#x27;s features) and painter is an ordinary <code>QPainter</code>. (The <a href="https://github.com/radekp/qt/blob/master/src/gui/widgets/qpushbutton.cpp#L444">actual code</a> uses a convenience class <code>QStylePainter</code>). <code>drawControl</code> then draws all elements of the button -- its text, icon, any frames, borders.</p>
<p>Unlike <code>QPushButton</code>, <code>QSlider</code> is a complex control, consisting of subcontrols that represent the slider&#x27;s groove, tickmarks and handle. Complex controls are not painted through <code>QStyle.drawControl</code> but through another method, <code>drawComplexControl</code>. Its signature is similar, but <code>option</code> has a mask <code>subcontrols</code>, which define the active subcontrols. Inactive controls are not painted and the user can&#x27;t interact with them.</p>
<p>The trick to paint a two-handled slider is to call <code>drawComplexControl</code> multiple times: first to draw the groove and tickmarks, and then twice, once for each handle. In the code fragment below, <code>self.opt</code> is a <code>QSliderOption</code>. Method <code>drawComplexControl</code> will put a handle at the position stored in <code>self.opt.sliderPosition</code>, hence we iterate it through <code>self._pos</code>, which stores the positions of our two handles.</p>
<pre><code>        # Draw groove and tickmarks
        self.opt.subControls = QStyle.SC_SliderGroove | QStyle.SC_SliderTickmarks
        self.style().drawComplexControl(QStyle.CC_Slider, self.opt, painter)

        # Draw handles
        self.opt.subControls = QStyle.SC_SliderHandle
        for self.opt.sliderPosition in self._pos:
            self.style().drawComplexControl(QStyle.CC_Slider, self.opt, painter)
</code></pre>
<p>The <a href="https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L206">code</a> adds some overhead (initializing options) and marks the part of the groove between the two handles in blue.</p>
<h2>Controlling controls</h2>
<p>Drawing a native looking widget is only one part of the job. What happens when the user clicks it? The widget receives a <code>mousePressEvent</code> - but which part of the widget was clicked? This is known only by the one who&#x27;s drawn the control: <code>QStyle</code>.</p>
<p><code>QStyle</code> implements several methods needed for interaction with complex controls. One is already used in <code>paintEvent</code>: we call <code>QStyle</code>&#x27;s <code>subControlRect(QStyle.CC_Slider, self.opt, QStyle.SC_SliderHandle)</code> to <a href="https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L223">obtain the logical coordinates of each handle</a> in order to mark the interval between them.</p>
<pre><code>        args = QStyle.CC_Slider, self.opt, QStyle.SC_SliderHandle
        self.opt.sliderPosition = self._pos[0]
        x_left_handle = self.style().subControlRect(*args).right()
        self.opt.sliderPosition = self._pos[1]
        x_right_handle = self.style().subControlRect(*args).left()
</code></pre>
<p>In <code>mousePressEvent</code>, we call <code>hitTestComplexControl(QStyle.CC_Slider, self.opt, event.pos(), self)</code>, which tells us which subcontrol (if any) of the slider contains <code>event.pos()</code>. As in <code>paintEvent</code>, we set <code>self.opt.sliderPosition</code> to each handle&#x27;s position in turn, to see if <code>hitTestComplexControl</code> returns <code>QStyle.SC_SliderHandle</code> for any of them.</p>
<pre><code>    def mousePressEvent(self, event: QMouseEvent) -&gt; None:
        self._dragged = self.NoHandle
        args = (QStyle.CC_Slider, self.opt, event.pos(), self)
        self.opt.sliderPosition = self._pos[0]
        if self.style().hitTestComplexControl(*args) == QStyle.SC_SliderHandle:
            self._dragged |= self.LowHandle
        self.opt.sliderPosition = self._pos[1]
        if self.style().hitTestComplexControl(*args) == QStyle.SC_SliderHandle:
            self._dragged |= self.HighHandle
        if self._dragged != self.NoHandle:
            self.sliderPressed.emit(self._dragged)
</code></pre>
<p>The <a href="https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L156">code</a> then records which handles are being dragged (if they overlap, both are marked as being dragged <a href="https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L175">until we see whether the user drags left or right</a>).</p>
<p>The third method of <code>QStyle</code>, which we use in <a href="https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L169"><code>mouseEvent</code></a> determines the slider value from handles position - which is again known only by the class that paints a platform-dependent slider. <code>sliderValueFromPosition</code> is given the slider span, (mouse) position and the total bounding rectangle of the slider, and returns the slider&#x27;s value for that position.</p>
<pre><code>        distance = self.opt.maximum - self.opt.minimum
        pos = self.style().sliderValueFromPosition(
            0, distance, event.pos().x(), self.rect().width())
</code></pre>
<h2>How do we use interval sliders?</h2>
<p>Using interval sliders is as trivial as using ordinary <code>QSliders</code>: initialize it with starting position, interval and options (if any), and connect the necessary signals.</p>
<pre><code>        slider = IntervalSlider(low, high * 100, minimum=0, maximum=100)
        self.slider.intervalChanged.connect(self.__on_slider_moved)
</code></pre>
<p>Done.</p></div></div></div></div></div></main><footer class="sc-c82ca4e2-0 iQtqNS"><div class="sc-ef15f394-0 iSNtvJ"><div class="sc-c82ca4e2-1 iiCJUO"><div><h3>Orange</h3><ul><li><a href="/faq">FAQ</a></li><li><a href="/license">License</a></li><li><a href="/privacy">Privacy</a></li><li><a href="/citation">Citation</a></li><li><a href="/contact">Contact</a></li></ul></div><div><h3>Download</h3><ul><li><a href="/download#win">Windows</a></li><li><a href="/download#mac">Mac OS</a></li></ul></div><div><h3>Community</h3><ul><li><a href="https://twitter.com/OrangeDataMiner">Twitter</a></li><li><a href="https://www.facebook.com/orangedatamining">Facebook</a></li><li><a href="https://datascience.stackexchange.com/questions/tagged/orange">Stack Exchange</a></li><li><a href="https://www.youtube.com/channel/UClKKWBe2SCAEyv7ZNGhIe4g">YouTube</a></li><li><a href="https://discord.com/invite/FWrfeXV">Discord</a></li></ul></div><div><h3>Documentation</h3><ul><li><a href="/getting-started">Get started</a></li><li><a href="/widget-catalogue">Widgets</a></li><li><a href="https://orange3.readthedocs.io/projects/orange-data-mining-library/en/latest/">Scripting</a></li></ul></div><div><h3>Developers</h3><ul><li><a href="https://github.com/biolab/orange3">GitHub</a></li><li><a href="http://docs.biolab.si/3/development/">Getting started</a></li></ul></div><div><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=A76TAX87ZVR3J" target="_blank" rel="noreferrer" class="sc-b6ea565a-0 jyxOJT">Donate to Orange</a></div></div><p>Copyright © University of Ljubljana</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"author":"Janez Demšar","date":"2023-03-10","draft":false,"title":"Interval Sliders","thumbImage":"2023-03-10-interval-slider-thumb.png","frontPageImage":"2023-03-10-interval-slider-thumb.png","blog":["development"],"shortExcerpt":"What does it take to add a second handle to a slider.","longExcerpt":"What does it take to add a second handle to a slider.","oldUrl":"/blog/2023/2023-03-10-interval-slider/"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h2: \"h2\",\n    a: \"a\",\n    em: \"em\",\n    code: \"code\",\n    pre: \"pre\"\n  }, _provideComponents(), props.components), {WindowScreenshot} = _components;\n  if (!WindowScreenshot) _missingMdxReference(\"WindowScreenshot\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(WindowScreenshot, {\n      src: \"/blog/2023-03-interval-slider/2023-03-10-heatmap.png\",\n      width: \"1326\",\n      height: \"962\",\n      src: \"/blog/2023-03-interval-slider/__webp-images__/2023-03-10-heatmap.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This post is not about the Heat Map widget. It's about the new double-handled slider at the top of the heatmap. Not about what it does, but about how it does it. The post should be interesting to readers with some knowledge of Qt. Others, who won't understand it, are expected to be impressed by the complexity of implementing something as simple as adding another handle to a slider. On the other hand (wait for the pun!), this complexity is not so surprising: attaching another, fully functional hand to a human would be quite a feat, too.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Why do we need it?\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"That is, why we need another handle on slider, not another hand. (Though an extra hand would be useful, too - how cool would it be to take a sip of tea while typing?)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"A user posted \", _jsx(_components.a, {\n        href: \"https://github.com/biolab/orange3/issues/6323\",\n        children: \"an issue\"\n      }), \", which he called \\\"\", _jsx(_components.em, {\n        children: \"Not a problem. More a frustration\"\n      }), \"\\\". Some widgets from the Text add-on allow the user to specify a range of values, for instance for filtering, which they do with a pair of spin boxes (those controls where you can enter a number manually or change it by pressing little up and down button on their right) or a pair of sliders. He suggested using a single slider with two handles. He noted that Orange currently doesn't have such a control in its repertoire.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"With a bit of exaggeration, I use such sliders almost daily to specify the price range when ordering bicycle parts, tools and clothes. While I'm no stranger to such sliders, I don't particularly like them. Entering numbers manually is much easier. But then ... they could be useful in cases where numbers are not intepretable, so sliding a handle is more natural than guessing random numbers. A good example is setting scales for color palettes: the user has no idea which particular number will make the image look good.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Drawing native-looking widgets\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Problem: Qt doesn't have such widget.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Qt is great - consistent, fast, powerful, and it has native look on all platforms. But if you want to make any small change to some element, its painting falls back to a Qt-based implementation which looks ... not only out of place but, well, ugly. See what becomes of a push button if you would, for whatever reason, want to increase its font size.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-03-interval-slider/2023-03-10-ugly-button.png\",\n      width: \"548\",\n      height: \"92\",\n      src: \"/blog/2023-03-interval-slider/__webp-images__/2023-03-10-ugly-button.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"So, can we create a double-handled slider that looks as it should? Not with some ugly square-ish handles?\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"OP provided us with a \", _jsx(_components.a, {\n        href: \"https://stackoverflow.com/a/62665367\",\n        children: \"link\"\n      }), \" to implementation of such a slider. Our version is different, but based on the same trick.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Widget is (re)painted upon receiving a \", _jsx(_components.a, {\n        href: \"https://doc.qt.io/qt-6/qwidget.html#paintEvent\",\n        children: _jsx(_components.code, {\n          children: \"paintEvent\"\n        })\n      }), \". It must construct a painter, initialize it with proper options and paint whatever needs to be painted. \", _jsx(_components.code, {\n        children: \"QPushButton\"\n      }), \", \", _jsx(_components.code, {\n        children: \"QCheckBox\"\n      }), \", \", _jsx(_components.code, {\n        children: \"QLineEdit\"\n      }), \" ... and many other widgets must look different on different platforms. The actual painting is thus not coded within widgets, but relegated to \", _jsx(_components.code, {\n        children: \"QStyle\"\n      }), \". \", _jsx(_components.code, {\n        children: \"QStyle\"\n      }), \" is however an class: the actual \", _jsx(_components.code, {\n        children: \"QStyle\"\n      }), \" in use by the application is \", _jsxs(_components.a, {\n        href: \"https://doc.qt.io/qt-6/qstyle.html#details\",\n        children: [\"one of \", _jsx(_components.code, {\n          children: \"QStyle\"\n        }), \"'s subclasses\"]\n      }), \" for different platforms and looks.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For instance, \", _jsx(_components.code, {\n        children: \"QPushButton.paintEvent\"\n      }), \" just calls \", _jsx(_components.code, {\n        children: \"QStyle\"\n      }), \"'s \", _jsx(_components.code, {\n        children: \"drawControl(QStyle.CE_PushButton, option, painter)\"\n      }), \", where \", _jsx(_components.code, {\n        children: \"CE_PushButton\"\n      }), \" is a constant giving the control to paint, option is an instance of \", _jsx(_components.code, {\n        children: \"QStyleOptionButton\"\n      }), \" with the necessary data (the icon, text and button's features) and painter is an ordinary \", _jsx(_components.code, {\n        children: \"QPainter\"\n      }), \". (The \", _jsx(_components.a, {\n        href: \"https://github.com/radekp/qt/blob/master/src/gui/widgets/qpushbutton.cpp#L444\",\n        children: \"actual code\"\n      }), \" uses a convenience class \", _jsx(_components.code, {\n        children: \"QStylePainter\"\n      }), \"). \", _jsx(_components.code, {\n        children: \"drawControl\"\n      }), \" then draws all elements of the button -- its text, icon, any frames, borders.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Unlike \", _jsx(_components.code, {\n        children: \"QPushButton\"\n      }), \", \", _jsx(_components.code, {\n        children: \"QSlider\"\n      }), \" is a complex control, consisting of subcontrols that represent the slider's groove, tickmarks and handle. Complex controls are not painted through \", _jsx(_components.code, {\n        children: \"QStyle.drawControl\"\n      }), \" but through another method, \", _jsx(_components.code, {\n        children: \"drawComplexControl\"\n      }), \". Its signature is similar, but \", _jsx(_components.code, {\n        children: \"option\"\n      }), \" has a mask \", _jsx(_components.code, {\n        children: \"subcontrols\"\n      }), \", which define the active subcontrols. Inactive controls are not painted and the user can't interact with them.\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The trick to paint a two-handled slider is to call \", _jsx(_components.code, {\n        children: \"drawComplexControl\"\n      }), \" multiple times: first to draw the groove and tickmarks, and then twice, once for each handle. In the code fragment below, \", _jsx(_components.code, {\n        children: \"self.opt\"\n      }), \" is a \", _jsx(_components.code, {\n        children: \"QSliderOption\"\n      }), \". Method \", _jsx(_components.code, {\n        children: \"drawComplexControl\"\n      }), \" will put a handle at the position stored in \", _jsx(_components.code, {\n        children: \"self.opt.sliderPosition\"\n      }), \", hence we iterate it through \", _jsx(_components.code, {\n        children: \"self._pos\"\n      }), \", which stores the positions of our two handles.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"        # Draw groove and tickmarks\\n        self.opt.subControls = QStyle.SC_SliderGroove | QStyle.SC_SliderTickmarks\\n        self.style().drawComplexControl(QStyle.CC_Slider, self.opt, painter)\\n\\n        # Draw handles\\n        self.opt.subControls = QStyle.SC_SliderHandle\\n        for self.opt.sliderPosition in self._pos:\\n            self.style().drawComplexControl(QStyle.CC_Slider, self.opt, painter)\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.a, {\n        href: \"https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L206\",\n        children: \"code\"\n      }), \" adds some overhead (initializing options) and marks the part of the groove between the two handles in blue.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Controlling controls\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Drawing a native looking widget is only one part of the job. What happens when the user clicks it? The widget receives a \", _jsx(_components.code, {\n        children: \"mousePressEvent\"\n      }), \" - but which part of the widget was clicked? This is known only by the one who's drawn the control: \", _jsx(_components.code, {\n        children: \"QStyle\"\n      }), \".\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.code, {\n        children: \"QStyle\"\n      }), \" implements several methods needed for interaction with complex controls. One is already used in \", _jsx(_components.code, {\n        children: \"paintEvent\"\n      }), \": we call \", _jsx(_components.code, {\n        children: \"QStyle\"\n      }), \"'s \", _jsx(_components.code, {\n        children: \"subControlRect(QStyle.CC_Slider, self.opt, QStyle.SC_SliderHandle)\"\n      }), \" to \", _jsx(_components.a, {\n        href: \"https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L223\",\n        children: \"obtain the logical coordinates of each handle\"\n      }), \" in order to mark the interval between them.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"        args = QStyle.CC_Slider, self.opt, QStyle.SC_SliderHandle\\n        self.opt.sliderPosition = self._pos[0]\\n        x_left_handle = self.style().subControlRect(*args).right()\\n        self.opt.sliderPosition = self._pos[1]\\n        x_right_handle = self.style().subControlRect(*args).left()\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"In \", _jsx(_components.code, {\n        children: \"mousePressEvent\"\n      }), \", we call \", _jsx(_components.code, {\n        children: \"hitTestComplexControl(QStyle.CC_Slider, self.opt, event.pos(), self)\"\n      }), \", which tells us which subcontrol (if any) of the slider contains \", _jsx(_components.code, {\n        children: \"event.pos()\"\n      }), \". As in \", _jsx(_components.code, {\n        children: \"paintEvent\"\n      }), \", we set \", _jsx(_components.code, {\n        children: \"self.opt.sliderPosition\"\n      }), \" to each handle's position in turn, to see if \", _jsx(_components.code, {\n        children: \"hitTestComplexControl\"\n      }), \" returns \", _jsx(_components.code, {\n        children: \"QStyle.SC_SliderHandle\"\n      }), \" for any of them.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"    def mousePressEvent(self, event: QMouseEvent) -\u003e None:\\n        self._dragged = self.NoHandle\\n        args = (QStyle.CC_Slider, self.opt, event.pos(), self)\\n        self.opt.sliderPosition = self._pos[0]\\n        if self.style().hitTestComplexControl(*args) == QStyle.SC_SliderHandle:\\n            self._dragged |= self.LowHandle\\n        self.opt.sliderPosition = self._pos[1]\\n        if self.style().hitTestComplexControl(*args) == QStyle.SC_SliderHandle:\\n            self._dragged |= self.HighHandle\\n        if self._dragged != self.NoHandle:\\n            self.sliderPressed.emit(self._dragged)\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The \", _jsx(_components.a, {\n        href: \"https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L156\",\n        children: \"code\"\n      }), \" then records which handles are being dragged (if they overlap, both are marked as being dragged \", _jsx(_components.a, {\n        href: \"https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L175\",\n        children: \"until we see whether the user drags left or right\"\n      }), \").\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The third method of \", _jsx(_components.code, {\n        children: \"QStyle\"\n      }), \", which we use in \", _jsx(_components.a, {\n        href: \"https://github.com/biolab/orange3/blob/5330c9fb5ed8dc08ed20350e21b026fbe54b6320/Orange/widgets/utils/intervalslider.py#L169\",\n        children: _jsx(_components.code, {\n          children: \"mouseEvent\"\n        })\n      }), \" determines the slider value from handles position - which is again known only by the class that paints a platform-dependent slider. \", _jsx(_components.code, {\n        children: \"sliderValueFromPosition\"\n      }), \" is given the slider span, (mouse) position and the total bounding rectangle of the slider, and returns the slider's value for that position.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"        distance = self.opt.maximum - self.opt.minimum\\n        pos = self.style().sliderValueFromPosition(\\n            0, distance, event.pos().x(), self.rect().width())\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"How do we use interval sliders?\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Using interval sliders is as trivial as using ordinary \", _jsx(_components.code, {\n        children: \"QSliders\"\n      }), \": initialize it with starting position, interval and options (if any), and connect the necessary signals.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"        slider = IntervalSlider(low, high * 100, minimum=0, maximum=100)\\n        self.slider.intervalChanged.connect(self.__on_slider_moved)\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Done.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"interval-sliders"},"buildId":"YvzjkC3auVl_W90btJChE","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>