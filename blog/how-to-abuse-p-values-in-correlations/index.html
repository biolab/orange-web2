<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="description" content="Orange Data Mining Toolbox"/><meta property="og:url" content="https://orangedatamining.com"/><meta property="og:site_name" content="Orange Data Mining"/><meta name="author" content="Bioinformatics Laboratory, University of Ljubljana"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github.min.css"/><title>Orange Data Mining - How to Abuse p-Values in Correlations</title><meta name="robots" content="index,follow"/><meta property="og:title" content="Orange Data Mining - How to Abuse p-Values in Correlations"/><meta property="og:description" content="Why doesn&#x27;t Orange show p-values for correlations coefficients? To save you from data dredging and Texas sharpshooter fallacy..."/><meta property="og:type" content="article"/><meta property="article:published_time" content="2019-01-04"/><meta property="article:author" content="Ajda Pretnar"/><meta property="article:tag" content="correlations"/><meta property="article:tag" content="NHTS"/><meta property="article:tag" content="null hypothesis"/><meta property="article:tag" content="p-value"/><meta property="article:tag" content="statistics"/><meta property="og:image" content="/blog/2019-1-how-to-abuse-p-values-in-correlations/__webp-images__/correlations.webp"/><meta property="og:image:width" content="450"/><meta property="og:image:height" content="300"/><meta name="next-head-count" content="22"/><link rel="preload" href="/_next/static/media/e7c7dbb62ddcf6fa-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/148a6a0ea3cd708f.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/148a6a0ea3cd708f.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/4ac7ed34d61ef456.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/4ac7ed34d61ef456.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-21c828b96ad33382.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-0c7baedefba6b077.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-61a1de8ce4711ed8.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-5cf731f7ca37c3f5.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/110-f463c991b9377c97.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f1fbe7543c5d96e5.js" defer="" crossorigin=""></script><script src="/_next/static/mqeKqgdLtMqusMMeZ0kHf/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/mqeKqgdLtMqusMMeZ0kHf/_ssgManifest.js" defer="" crossorigin=""></script><style data-styled="" data-styled-version="5.3.6">.iSNtvJ{position:relative;max-width:1296px;margin-right:auto;margin-left:auto;padding-left:72px;padding-right:72px;height:100%;box-sizing:content-box;}/*!sc*/
@media (max-width:1130px){.iSNtvJ{padding-left:30px;padding-right:30px;}}/*!sc*/
@media (max-width:720px){.iSNtvJ{padding-left:15px;padding-right:15px;}}/*!sc*/
.fJLXpS{position:relative;max-width:1296px;margin-right:auto;margin-left:auto;padding-left:72px;padding-right:72px;height:100%;box-sizing:content-box;max-width:714px;}/*!sc*/
@media (max-width:1130px){.fJLXpS{padding-left:30px;padding-right:30px;}}/*!sc*/
@media (max-width:720px){.fJLXpS{padding-left:15px;padding-right:15px;}}/*!sc*/
data-styled.g1[id="sc-ef15f394-0"]{content:"iSNtvJ,fJLXpS,"}/*!sc*/
.jyxOJT{position:relative;display:inline-block;max-width:100%;font-size:20px;line-height:1.25;font-weight:600;-webkit-text-decoration:none;text-decoration:none;color:#fff;padding:10px 15px;border-radius:5px;background-image:linear-gradient(180deg,#FE7A00 74.93%,#F65D18 100%);box-shadow:0px 10px 10px rgba(0,0,0,0.03);background-size:100%;cursor:pointer;z-index:2;}/*!sc*/
@media (max-width:720px){.jyxOJT{font-size:18px;}}/*!sc*/
.jyxOJT:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background-image:linear-gradient(180deg,#ffbc44 100%,#FE7A00 100%);opacity:0;z-index:-100;-webkit-transition:opacity 0.45s;transition:opacity 0.45s;}/*!sc*/
.jyxOJT:hover{color:#fff;}/*!sc*/
.jyxOJT:hover:before{opacity:1;}/*!sc*/
data-styled.g2[id="sc-b6ea565a-0"]{content:"jyxOJT,"}/*!sc*/
.iQtqNS{background:#1F1F1F;padding:38px 0 25px;color:#fff;}/*!sc*/
data-styled.g3[id="sc-c82ca4e2-0"]{content:"iQtqNS,"}/*!sc*/
.iiCJUO{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-column-gap:80px;column-gap:80px;row-gap:40px;margin-bottom:40px;}/*!sc*/
@media (max-width:720px){.iiCJUO{display:grid;grid-template-columns:1fr 1fr;-webkit-column-gap:20px;column-gap:20px;}}/*!sc*/
.iiCJUO h3{font-size:16px;font-weight:600;margin-bottom:12px;}/*!sc*/
.iiCJUO li + li{margin-top:12px;}/*!sc*/
data-styled.g4[id="sc-c82ca4e2-1"]{content:"iiCJUO,"}/*!sc*/
.eWdALT{display:none;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:44px;height:34px;padding:6px;border-radius:5px;border:none;background:linear-gradient(180deg,#FE7A00 74.93%,#F65D18 100%);box-shadow:0px 10px 10px rgba(0,0,0,0.03);cursor:pointer;margin-left:auto;}/*!sc*/
@media (max-width:920px){.eWdALT{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
.eWdALT div{width:22px;height:2px;background:#fff;-webkit-transform-origin:1px;-ms-transform-origin:1px;transform-origin:1px;-webkit-transition:all 0.3s linear;transition:all 0.3s linear;}/*!sc*/
data-styled.g5[id="sc-46d6b9d9-0"]{content:"eWdALT,"}/*!sc*/
.jTcDmc{-webkit-clip:rect(0 0 0 0);clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;}/*!sc*/
data-styled.g6[id="sc-cdea7863-0"]{content:"jTcDmc,"}/*!sc*/
.klNjip{height:80px;background:#fff;box-shadow:0px 4px 10px 4px rgba(0,0,0,0.04);}/*!sc*/
data-styled.g7[id="sc-bac7f990-0"]{content:"klNjip,"}/*!sc*/
.hOqLDN{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}/*!sc*/
.hOqLDN .img-logo{width:115px;}/*!sc*/
data-styled.g8[id="sc-bac7f990-1"]{content:"hOqLDN,"}/*!sc*/
.cqbOTb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:920px){.cqbOTb{display:block;position:absolute;top:80px;left:0;width:100%;z-index:1;padding:0 30px 30px;background-color:#fff;opacity:0;z-index:-9999;pointer-events:none;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;box-shadow:0 4px 10px -1px rgba(0,0,0,0.04);}}/*!sc*/
@media (max-width:720px){.cqbOTb{padding:0 15px 15px;}}/*!sc*/
data-styled.g9[id="sc-bac7f990-2"]{content:"cqbOTb,"}/*!sc*/
.iRcXLS{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:920px){.iRcXLS{display:block;margin-bottom:15px;}}/*!sc*/
.iRcXLS li + li{margin-left:26px;}/*!sc*/
@media (max-width:920px){.iRcXLS li + li{margin-left:0;}}/*!sc*/
.iRcXLS a{display:inline-block;font-size:1.25rem;line-height:1;color:#000000;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.3s;transition:color 0.3s;}/*!sc*/
.iRcXLS a:hover{color:#FE7A00;}/*!sc*/
@media (max-width:920px){.iRcXLS a{padding:8px 0;}}/*!sc*/
data-styled.g10[id="sc-bac7f990-3"]{content:"iRcXLS,"}/*!sc*/
.kSHWdx{position:relative;width:160px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:width 0.3s ease-in-out;transition:width 0.3s ease-in-out;margin-left:26px;}/*!sc*/
@media (max-width:920px){.kSHWdx{width:auto;margin-left:0;}}/*!sc*/
data-styled.g11[id="sc-bac7f990-4"]{content:"kSHWdx,"}/*!sc*/
.hXYwkT{display:inline-block;position:absolute;top:0;right:42px;width:calc(100% - 42px);height:100%;font-size:16px;line-height:1.25;padding:10px 13px;background:#fff;border-radius:5px 0px 0px 5px;border:1px solid #D9D9D9;border-right:none;-webkit-transition:width 0.3s ease-in-out;transition:width 0.3s ease-in-out;}/*!sc*/
@media (max-width:920px){.hXYwkT{display:none;}}/*!sc*/
.hXYwkT::-webkit-input-placeholder{color:#D9D9D9;}/*!sc*/
.hXYwkT::-moz-placeholder{color:#D9D9D9;}/*!sc*/
.hXYwkT:-ms-input-placeholder{color:#D9D9D9;}/*!sc*/
.hXYwkT::placeholder{color:#D9D9D9;}/*!sc*/
data-styled.g12[id="sc-bac7f990-5"]{content:"hXYwkT,"}/*!sc*/
.lfAUtN{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#fff;margin-left:auto;-webkit-flex:0 0 42px;-ms-flex:0 0 42px;flex:0 0 42px;height:41px;border:1px solid #474747;border-radius:0px 5px 5px 0px;background-color:#474747;}/*!sc*/
@media (max-width:920px){.lfAUtN{margin-left:0;}}/*!sc*/
data-styled.g13[id="sc-bac7f990-6"]{content:"lfAUtN,"}/*!sc*/
.eBQFeB{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
data-styled.g18[id="sc-da66f971-0"]{content:"eBQFeB,"}/*!sc*/
*,*:before,*:after{box-sizing:border-box;-webkit-font-smoothing:antialiased;}/*!sc*/
html,body{height:100%;margin:0;}/*!sc*/
html{font-family:'Source Sans Pro',sans-serif;font-weight:400;color:#000000;}/*!sc*/
body{background:#fff;}/*!sc*/
body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:normal;}/*!sc*/
main{-webkit-flex:1;-ms-flex:1;flex:1;}/*!sc*/
ol,ul{list-style:none;}/*!sc*/
figure{margin:0;}/*!sc*/
img,video{display:block;max-width:100%;height:auto;}/*!sc*/
a{color:unset;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
a:hover{color:unset;}/*!sc*/
strong{font-weight:600;}/*!sc*/
pre{display:block;padding:20px;margin:0 0 10px;font-size:14px;line-height:1.42857143;word-break:break-all;word-wrap:break-word;color:#000;border:1px solid #ebebeb;border-radius:5px;overflow-x:auto;word-wrap:normal;}/*!sc*/
pre code{padding:0 !important;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0;border:none;}/*!sc*/
code{padding:2px 3px;background:#f7f7f7;border:1px solid #ededed;border-radius:0.375rem;display:inline-block;line-height:1.2;margin:0;font-size:82%;}/*!sc*/
::selection{background-color:#FE7A00;color:#fff;}/*!sc*/
.lg-container .lg-backdrop.in{opacity:0.75;}/*!sc*/
.lg-container .lg-toolbar.lg-group,.lg-container .lg-outer .lg-thumb-outer{background:rgba(0,0,0,0.45);}/*!sc*/
data-styled.g19[id="sc-global-dTKGWS1"]{content:"sc-global-dTKGWS1,"}/*!sc*/
.KDZEp h1{font-size:44px;line-height:1.13;font-weight:700;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.KDZEp h1{font-size:38px;}}/*!sc*/
@media (max-width:720px){.KDZEp h1{font-size:32px;}}/*!sc*/
.KDZEp h2{font-size:33px;line-height:1.13;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.KDZEp h2{font-size:30px;}}/*!sc*/
@media (max-width:720px){.KDZEp h2{font-size:26px;}}/*!sc*/
.KDZEp h3{font-size:28px;line-height:1.18;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.KDZEp h3{font-size:26px;}}/*!sc*/
@media (max-width:720px){.KDZEp h3{font-size:24px;}}/*!sc*/
.KDZEp h4{font-size:22px;line-height:1.18;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:720px){.KDZEp h4{font-size:20px;}}/*!sc*/
.KDZEp p{font-size:20px;line-height:1.4;color:#1F1F1F;}/*!sc*/
@media (max-width:1130px){.KDZEp p{font-size:20px;}}/*!sc*/
@media (max-width:920px){.KDZEp p{font-size:18px;}}/*!sc*/
.KDZEp ul,.KDZEp ol{padding-left:40px;}/*!sc*/
.KDZEp ul li,.KDZEp ol li{font-size:20px;line-height:1.4;color:#1F1F1F;}/*!sc*/
@media (max-width:1130px){.KDZEp ul li,.KDZEp ol li{font-size:20px;}}/*!sc*/
@media (max-width:920px){.KDZEp ul li,.KDZEp ol li{font-size:18px;}}/*!sc*/
.KDZEp ul li + li,.KDZEp ol li + li{margin-top:4px;}/*!sc*/
.KDZEp ul{list-style:disc;}/*!sc*/
.KDZEp ol{list-style:decimal;}/*!sc*/
.KDZEp p a,.KDZEp li a{color:#FE7A00;}/*!sc*/
.KDZEp p a:hover,.KDZEp li a:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
.KDZEp * + *:not(li,a,code){margin-top:20px;}/*!sc*/
.KDZEp * + a[data-gallery],.KDZEp * + video{margin-top:40px;}/*!sc*/
.KDZEp a[data-gallery]{display:block;margin-bottom:40px;}/*!sc*/
.KDZEp iframe,.KDZEp video{margin-bottom:40px;}/*!sc*/
data-styled.g20[id="sc-1a44a5f6-0"]{content:"KDZEp,"}/*!sc*/
.cXdfZy{font-size:62px;line-height:1.04;font-weight:700;color:#fff;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.cXdfZy{font-size:50px;}}/*!sc*/
@media (max-width:720px){.cXdfZy{font-size:42px;}}/*!sc*/
data-styled.g23[id="sc-4d34df46-0"]{content:"cXdfZy,"}/*!sc*/
.gCMEWD{padding:80px 0;}/*!sc*/
@media (max-width:920px){.gCMEWD{padding:60px 0;}}/*!sc*/
@media (max-width:720px){.gCMEWD{padding:40px 0;}}/*!sc*/
data-styled.g30[id="sc-d99538e1-0"]{content:"gCMEWD,"}/*!sc*/
.gSybOC{margin-bottom:30px;}/*!sc*/
data-styled.g31[id="sc-d99538e1-1"]{content:"gSybOC,"}/*!sc*/
.jttBvH{position:relative;}/*!sc*/
data-styled.g32[id="sc-d99538e1-2"]{content:"jttBvH,"}/*!sc*/
.dbPTsj{position:absolute;top:0;right:100%;width:200px;margin-right:50px;text-align:right;}/*!sc*/
@media (max-width:1130px){.dbPTsj{position:unset;width:auto;text-align:left;margin:0 0 30px 0;}}/*!sc*/
data-styled.g33[id="sc-d99538e1-3"]{content:"dbPTsj,"}/*!sc*/
.jFYhEh{font-size:20px;line-height:1.25;color:#1F1F1F;text-transform:capitalize;color:#5651EC;}/*!sc*/
@media (max-width:920px){.jFYhEh{font-size:18px;}}/*!sc*/
.dYEBIG{font-size:20px;line-height:1.25;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.dYEBIG{font-size:18px;}}/*!sc*/
data-styled.g34[id="sc-d99538e1-4"]{content:"jFYhEh,dYEBIG,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-da66f971-0 eBQFeB __className_667be3"><nav class="sc-bac7f990-0 klNjip"><div class="sc-ef15f394-0 iSNtvJ"><div class="sc-bac7f990-1 hOqLDN"><a href="/"><img alt="Orange Logo" loading="lazy" width="120" height="35" decoding="async" data-nimg="1" class="img-logo" style="color:transparent" src="/_next/static/media/logo-orange.faff1861.svg"/></a><div><button aria-label="Toggle navigation" class="sc-46d6b9d9-0 eWdALT"><div></div><div></div><div></div></button><div class="sc-bac7f990-2 cqbOTb"><ul class="sc-bac7f990-3 iRcXLS"><li><a href="/examples/">Examples</a></li><li><a href="/download/">Download</a></li><li><a href="/blog/">Blog</a></li><li><a href="/docs/">Docs</a></li><li><a href="/workshops/">Workshops</a></li></ul><form class="sc-bac7f990-4 kSHWdx"><div class="sc-bac7f990-5 hXYwkT">Search</div><button class="sc-bac7f990-6 lfAUtN"><img alt="Icon for search" loading="lazy" width="18" height="17" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/icon-search.459b2665.svg"/><span class="sc-cdea7863-0 jTcDmc">Search through page</span></button></form></div></div></div></div></nav><main><div class="sc-d99538e1-0 gCMEWD"><div class="sc-ef15f394-0 fJLXpS"><div class="sc-d99538e1-1 gSybOC"><p class="sc-d99538e1-4 jFYhEh"><strong>correlations, NHTS, null hypothesis, p-value, statistics</strong></p><h1 class="sc-4d34df46-0 cXdfZy">How to Abuse p-Values in Correlations</h1></div><div class="sc-d99538e1-2 jttBvH"><div class="sc-d99538e1-3 dbPTsj"><p class="sc-d99538e1-4 dYEBIG"><strong>Ajda Pretnar</strong></p><p class="sc-d99538e1-4 dYEBIG">Jan 04, 2019</p></div><div class="sc-1a44a5f6-0 KDZEp"><div class="lg-react-element "><p>In a parallel universe, not so far from ours, Orange’s Correlation widget looks like this.</p>
<p>\</p>
<a href="/blog/2019-1-how-to-abuse-p-values-in-correlations/__webp-images__/correlations-p-values-1.webp" data-gallery="true"><img alt="" loading="lazy" width="700" height="872" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-1-how-to-abuse-p-values-in-correlations/__webp-images__/correlations-p-values-1.webp"/></a>
<p><br/>
<!-- -->\</p>
<p>Quite similar to ours, except that this one shows p-values instead of correlation coefficients. Which is actually better, isn’t it? I mean, we have all attended Statistics 101, and we know that you can never trust correlation coefficients without looking at p-values to check that these correlations are real, right? So why on Earth doesn’t Orange show them?</p>
<p>First a side note. It was Christmas not long ago. Let’s call a ceasefire on the frequentist vs. Bayesian war. Let us, for Christ’s sake, pretend, pardon, agree that null-hypothesis testing is not wrong per se.</p>
<p>The mantra of null-hypothesis significance testing goes like this:</p>
<ol>
<li>Form hypothesis.</li>
<li>Collect data.</li>
<li>Test hypothesis.</li>
</ol>
<p>In contrast, the parallel-universe Correlation widget is (ab)used like this:</p>
<ol>
<li>Collect data.</li>
<li>Test all possible hypotheses.</li>
<li>Cherry pick those that are confirmed.</li>
</ol>
<p>This is like the <a href="https://en.wikipedia.org/wiki/Texas_sharpshooter_fallacy" target="_blank" rel="noreferrer">Texas sharpshooter</a> who fires first and then draws targets around the shots. You should never formulate hypothesis based on some data and then use this same data to prove it. Because it usually (surprise!) works.</p>
<p>\</p>
<a href="/blog/2019-1-how-to-abuse-p-values-in-correlations/__webp-images__/TexasSharpShooter.webp" data-gallery="true"><img alt="" loading="lazy" width="357" height="300" decoding="async" data-nimg="1" style="color:transparent" src="/blog/2019-1-how-to-abuse-p-values-in-correlations/__webp-images__/TexasSharpShooter.webp"/></a>
<p><br/>
<!-- -->\</p>
<p>Back to the above snapshot. It shows correlations between 100 vegetables based on 100 different measurements (Ca and Mg content, their consumption in Finland, number of mentions in Star Trek DS9 series, likelihood of finding it on the Mars, and so forth). In other words, it’s all made it up. Just a 100×100 matrix of random numbers with column labels from the simple Wikipedia <a href="https://simple.wikipedia.org/wiki/List_of_vegetables" target="_blank" rel="noreferrer">list of vegetables</a>. Yet the similarity between <a href="https://en.wikipedia.org/wiki/Mung_bean" target="_blank" rel="noreferrer">mung bean</a> and <a href="https://en.wikipedia.org/wiki/Jerusalem_artichoke" target="_blank" rel="noreferrer">sunchokes</a> surely cannot be dismissed (p &lt; 0.001). Those who like bell pepper should try cilantro, too, because it’s basically one and the same thing (p = 0.001). And I honestly can’t tell black bean from wasabi (p = 0.001).</p>
<p>Here are the p-values for the top 100 most correlated pairs.</p>
<p>import numpy as np
import scipy as sp
a = np.random.random((100, 100))
sorted(stats.pearsonr(a[i], a[j])[1] for i in range(100) for j in range(i))[:100]
[0.0002774329730584203, 0.0004158786523819104, 0.0005008536192579852,
0.0007211022164265075, 0.0008268675086438253, 0.0010265740674904762,
(...91 values omitted to reduce the nonsense)
0.01844720610938738, 0.018465602922746942, 0.018662079618069056]
First 100 correlations are highly significant.</p>
<p>To learn a lesson we may have failed to grasp at the NHST 101 class, consider that there are 100 * 99 / 2 pairs. What is the significance of the pair at 5-th percentile?</p>
<p>correlations = sorted(stats.pearsonr(a[i], a[j])[1] for i in range(100) for j in range(i))
npairs = 100 * 99 / 2
print(correlations[int(pairs * 0.05)]
0.0496868751692227</p>
<p>Roughly 0.05. This is exactly what should have happened, because:</p>
<p>correlations[int(npairs * 0.10)]
0.10004180592217532
correlations[int(npairs * 0.15)]
0.15236602574520097
correlations[int(npairs * 0.30)]
0.3026816170584785
This proves only that p-values for the Pearson correlation coefficient are well calibrated (and that <a href="https://en.wikipedia.org/wiki/Mersenne_Twister" target="_blank" rel="noreferrer">Mersenne twister</a> that is used to generate random numbers in numpy works well). In theory, the p-value for a certain statistics (like Pearson’s r) is the probability of getting such or even more extreme value if the null-hypothesis (of no correlation, in our case) is actually true. 5 % of random hypotheses should have a p-value below 0.05, 10 % a value below 10, and 23 % a value below 23.</p>
<p>Imagine what they can do with the Correlations widget in the parallel universe! They compute correlations between all pairs, print out the first 5 % of them and start writing a paper without bothering to look at p-values at all. They know they should be statistically significant even if the data is random.</p>
<p>Which is precisely the reason why our widget must not compute p-values: because people would use it for Texas sharpshooting. P-values make sense only in the context of the proper NHST procedure (still pretending for the sake of Christmas ceasefire). They cannot be computed using the data on which they were found.</p>
<p>If so, why do we have the Correlation widget at all if it’s results are unpublishable? We can use it to find highly correlated pairs in a data sample. But we can’t just attach p-values to them and publish them. By finding these pairs (with assistance of Correlation widget) we just formulate hypotheses. This is only step 1 of the enshrined NHST procedure. We can’t skip the other two: the next step is to collect some new data (existing data won’t do!) and then use it to test the hypotheses (step 3).</p>
<p>Following this procedure doesn’t save us from <a href="https://en.wikipedia.org/wiki/Data_dredging" target="_blank" rel="noreferrer">data dredging</a>. There are still plenty of ways to cheat. It is the most tempting to select the first 100 most correlated pairs (or, actually, any 100 pairs), (re)compute correlations on some new data and publish the top 5 % of these pairs. The official solution for this is a patchwork of various corrections for multiple hypotheses testing, but… Well, they don’t work, but we should say no more here. You know, Christmas ceasefire.</p></div></div></div></div></div></main><footer class="sc-c82ca4e2-0 iQtqNS"><div class="sc-ef15f394-0 iSNtvJ"><div class="sc-c82ca4e2-1 iiCJUO"><div><h3>Orange</h3><ul><li><a href="/faq/">FAQ</a></li><li><a href="/license/">License</a></li><li><a href="/privacy/">Privacy</a></li><li><a href="/citation/">Citation</a></li><li><a href="/contact/">Contact</a></li></ul></div><div><h3>Download</h3><ul><li><a href="/download/#win">Windows</a></li><li><a href="/download/#mac">Mac OS</a></li></ul></div><div><h3>Community</h3><ul><li><a href="https://twitter.com/OrangeDataMiner">Twitter</a></li><li><a href="https://www.facebook.com/orangedatamining">Facebook</a></li><li><a href="https://datascience.stackexchange.com/questions/tagged/orange">Stack Exchange</a></li><li><a href="https://www.youtube.com/channel/UClKKWBe2SCAEyv7ZNGhIe4g">YouTube</a></li><li><a href="https://discord.com/invite/FWrfeXV">Discord</a></li></ul></div><div><h3>Documentation</h3><ul><li><a href="/getting-started/">Get started</a></li><li><a href="/widget-catalogue/">Widgets</a></li><li><a href="https://orange3.readthedocs.io/projects/orange-data-mining-library/en/latest/">Scripting</a></li></ul></div><div><h3>Developers</h3><ul><li><a href="https://github.com/biolab/orange3">GitHub</a></li><li><a href="http://docs.biolab.si/3/development/">Getting started</a></li></ul></div><div><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=A76TAX87ZVR3J" target="_blank" rel="noreferrer" class="sc-b6ea565a-0 jyxOJT">Donate to Orange</a></div></div><p>Copyright © University of Ljubljana</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontmatter":{"author":"Ajda Pretnar","date":"2019-01-04","draft":false,"title":"How to Abuse p-Values in Correlations","thumbImage":"correlations.png","image":"","blog":["correlations","NHTS","null hypothesis","p-value","statistics"],"shortExcerpt":"Why doesn't Orange show p-values for correlations coefficients? To save you from data dredging and Texas sharpshooter fallacy...","longExcerpt":"We have all attended Statistics 101, and we know that you can never trust correlation coefficients without looking at p-values to check that these correlations are real, right? So why on Earth doesn’t Orange show them?","oldUrl":"/blog/2019/1/4/how-to-abuse-p-values-in-correlations/"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    br: \"br\",\n    ol: \"ol\",\n    li: \"li\"\n  }, _provideComponents(), props.components), {Figure, LinkNew} = _components;\n  if (!Figure) _missingMdxReference(\"Figure\", true);\n  if (!LinkNew) _missingMdxReference(\"LinkNew\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"In a parallel universe, not so far from ours, Orange’s Correlation widget looks like this.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"\\\\\"\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-1-how-to-abuse-p-values-in-correlations/correlations-p-values-1.png\",\n      src: \"40%\",\n      width: \"700\",\n      height: \"872\",\n      src: \"/blog/2019-1-how-to-abuse-p-values-in-correlations/__webp-images__/correlations-p-values-1.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.br, {}), \"\\n\", \"\\\\\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Quite similar to ours, except that this one shows p-values instead of correlation coefficients. Which is actually better, isn’t it? I mean, we have all attended Statistics 101, and we know that you can never trust correlation coefficients without looking at p-values to check that these correlations are real, right? So why on Earth doesn’t Orange show them?\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"First a side note. It was Christmas not long ago. Let’s call a ceasefire on the frequentist vs. Bayesian war. Let us, for Christ’s sake, pretend, pardon, agree that null-hypothesis testing is not wrong per se.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The mantra of null-hypothesis significance testing goes like this:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Form hypothesis.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Collect data.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Test hypothesis.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In contrast, the parallel-universe Correlation widget is (ab)used like this:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Collect data.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Test all possible hypotheses.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Cherry pick those that are confirmed.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"This is like the \", _jsx(LinkNew, {\n        url: \"https://en.wikipedia.org/wiki/Texas_sharpshooter_fallacy\",\n        name: \"Texas sharpshooter\"\n      }), \" who fires first and then draws targets around the shots. You should never formulate hypothesis based on some data and then use this same data to prove it. Because it usually (surprise!) works.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"\\\\\"\n    }), \"\\n\", _jsx(Figure, {\n      src: \"/blog/2019-1-how-to-abuse-p-values-in-correlations/TexasSharpShooter.png\",\n      src: \"50%\",\n      src: \"Illustration by Dirk-Jan Hoek (CC-BY).\",\n      width: \"357\",\n      height: \"300\",\n      src: \"/blog/2019-1-how-to-abuse-p-values-in-correlations/__webp-images__/TexasSharpShooter.webp\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [_jsx(_components.br, {}), \"\\n\", \"\\\\\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Back to the above snapshot. It shows correlations between 100 vegetables based on 100 different measurements (Ca and Mg content, their consumption in Finland, number of mentions in Star Trek DS9 series, likelihood of finding it on the Mars, and so forth). In other words, it’s all made it up. Just a 100×100 matrix of random numbers with column labels from the simple Wikipedia \", _jsx(LinkNew, {\n        url: \"https://simple.wikipedia.org/wiki/List_of_vegetables\",\n        name: \"list of vegetables\"\n      }), \". Yet the similarity between \", _jsx(LinkNew, {\n        url: \"https://en.wikipedia.org/wiki/Mung_bean\",\n        name: \"mung bean\"\n      }), \" and \", _jsx(LinkNew, {\n        url: \"https://en.wikipedia.org/wiki/Jerusalem_artichoke\",\n        name: \"sunchokes\"\n      }), \" surely cannot be dismissed (p \u003c 0.001). Those who like bell pepper should try cilantro, too, because it’s basically one and the same thing (p = 0.001). And I honestly can’t tell black bean from wasabi (p = 0.001).\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Here are the p-values for the top 100 most correlated pairs.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"import numpy as np\\nimport scipy as sp\\na = np.random.random((100, 100))\\nsorted(stats.pearsonr(a[i], a[j])[1] for i in range(100) for j in range(i))[:100]\\n[0.0002774329730584203, 0.0004158786523819104, 0.0005008536192579852,\\n0.0007211022164265075, 0.0008268675086438253, 0.0010265740674904762,\\n(...91 values omitted to reduce the nonsense)\\n0.01844720610938738, 0.018465602922746942, 0.018662079618069056]\\nFirst 100 correlations are highly significant.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"To learn a lesson we may have failed to grasp at the NHST 101 class, consider that there are 100 * 99 / 2 pairs. What is the significance of the pair at 5-th percentile?\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"correlations = sorted(stats.pearsonr(a[i], a[j])[1] for i in range(100) for j in range(i))\\nnpairs = 100 * 99 / 2\\nprint(correlations[int(pairs * 0.05)]\\n0.0496868751692227\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Roughly 0.05. This is exactly what should have happened, because:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"correlations[int(npairs * 0.10)]\\n0.10004180592217532\\ncorrelations[int(npairs * 0.15)]\\n0.15236602574520097\\ncorrelations[int(npairs * 0.30)]\\n0.3026816170584785\\nThis proves only that p-values for the Pearson correlation coefficient are well calibrated (and that \", _jsx(LinkNew, {\n        url: \"https://en.wikipedia.org/wiki/Mersenne_Twister\",\n        name: \"Mersenne twister\"\n      }), \" that is used to generate random numbers in numpy works well). In theory, the p-value for a certain statistics (like Pearson’s r) is the probability of getting such or even more extreme value if the null-hypothesis (of no correlation, in our case) is actually true. 5 % of random hypotheses should have a p-value below 0.05, 10 % a value below 10, and 23 % a value below 23.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Imagine what they can do with the Correlations widget in the parallel universe! They compute correlations between all pairs, print out the first 5 % of them and start writing a paper without bothering to look at p-values at all. They know they should be statistically significant even if the data is random.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Which is precisely the reason why our widget must not compute p-values: because people would use it for Texas sharpshooting. P-values make sense only in the context of the proper NHST procedure (still pretending for the sake of Christmas ceasefire). They cannot be computed using the data on which they were found.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"If so, why do we have the Correlation widget at all if it’s results are unpublishable? We can use it to find highly correlated pairs in a data sample. But we can’t just attach p-values to them and publish them. By finding these pairs (with assistance of Correlation widget) we just formulate hypotheses. This is only step 1 of the enshrined NHST procedure. We can’t skip the other two: the next step is to collect some new data (existing data won’t do!) and then use it to test the hypotheses (step 3).\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Following this procedure doesn’t save us from \", _jsx(LinkNew, {\n        url: \"https://en.wikipedia.org/wiki/Data_dredging\",\n        name: \"data dredging\"\n      }), \". There are still plenty of ways to cheat. It is the most tempting to select the first 100 most correlated pairs (or, actually, any 100 pairs), (re)compute correlations on some new data and publish the top 5 % of these pairs. The official solution for this is a patchwork of various corrections for multiple hypotheses testing, but… Well, they don’t work, but we should say no more here. You know, Christmas ceasefire.\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}},"thumbImage":{"width":450,"height":300,"src":"/blog/2019-1-how-to-abuse-p-values-in-correlations/__webp-images__/correlations.webp"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"how-to-abuse-p-values-in-correlations"},"buildId":"mqeKqgdLtMqusMMeZ0kHf","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>