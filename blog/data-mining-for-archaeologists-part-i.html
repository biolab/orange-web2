<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>My new cool app</title><meta name="next-head-count" content="3"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-d38be8d96a62f950.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-9f90a364d66949ce.js" defer=""></script><script src="/_next/static/chunks/pages/_app-72ed113f22a36849.js" defer=""></script><script src="/_next/static/chunks/675-262430aa11afdf01.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-686c32cdd11f6681.js" defer=""></script><script src="/_next/static/Z7L00iEto9rZ4XCOOSDzJ/_buildManifest.js" defer=""></script><script src="/_next/static/Z7L00iEto9rZ4XCOOSDzJ/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.6">.iBQlkL{background:coral;height:60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:920px){.iBQlkL ul{display:none;}}/*!sc*/
data-styled.g1[id="sc-7295e4c-0"]{content:"iBQlkL,"}/*!sc*/
.bDMZDz{display:none;font-size:22px;margin-left:auto;}/*!sc*/
@media (max-width:920px){.bDMZDz{display:block;}}/*!sc*/
data-styled.g2[id="sc-7295e4c-1"]{content:"bDMZDz,"}/*!sc*/
html,body{height:100%;margin:0;}/*!sc*/
body{background:#fff;}/*!sc*/
html{box-sizing:border-box;font-size:16px;}/*!sc*/
*,*:before,*:after{box-sizing:inherit;}/*!sc*/
body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:normal;}/*!sc*/
ol,ul{list-style:none;}/*!sc*/
img,video{max-width:100%;height:auto;}/*!sc*/
data-styled.g3[id="sc-global-eYmBoQ1"]{content:"sc-global-eYmBoQ1,"}/*!sc*/
.eTvBKa{max-width:800px;margin:0 auto;}/*!sc*/
data-styled.g4[id="sc-f1463bb7-0"]{content:"eTvBKa,"}/*!sc*/
.brOllG{display:block;margin-left:auto;margin-right:auto;}/*!sc*/
data-styled.g5[id="sc-f1463bb7-1"]{content:"brOllG,"}/*!sc*/
</style></head><body><div id="__next"><nav class="sc-7295e4c-0 iBQlkL"><ul><a href="/blog">Blog</a></ul><button class="sc-7295e4c-1 bDMZDz">X</button></nav><main><div class="sc-f1463bb7-0 eTvBKa"><h1>Data Mining for Archaeologists, part I</h1><p>Recently, we held a workshop for a group of archaeologists. While archaeologists are quite well-versed in quantitative analysis, data science was still quite new for most of the participants. Our aim was to introduce basic data science concepts through archaeological use cases. One such case that came to our mind was predicting a type of the artefact from the image.</p>
<p>Related: <a href="blog/2018/11/06/data-mining-for-anthropologists/" target="_blank">Data Mining for Anthropologists</a></p>
<p>We took three best-documented amphora types (types with the highest number of images) from the <a href="https://archaeologydataservice.ac.uk/archives/view/amphora_ahrb_2005/index.cfm">Archaeology Data Service portal</a>. We also added some metadata describing each amphora subtype.</p>
<p>This is how our data looks like.</p>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-data-table.png 1x" src="/blog/2021-04-archaeology-workshop/2021-04-23-data-table.png" width="2652" height="968" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<p>Each row represents one amphora, with type, image URL, subtype, and metadata included. Let us observe the data in an <strong>Image Viewer</strong> from the <strong>Image Analytics</strong> add-on.</p>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-image-viewer.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-image-viewer.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-image-viewer.png" width="1754" height="1278" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-workflow1.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-workflow1.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-workflow1.png" width="454" height="360" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<p>Images now have to be converted to numbers, so that predictive models will know how to infer patterns from them. The procedure of describing an image with a vector is called embedding and in Orange, it can be found in <strong>Image Embedding</strong> widget. We will use a simple, pre-trained Inception v3 model, but it is possible to train custom models specifically for archaeology.</p>
<p>The result of embedding is a long line of numbers.</p>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-embedding.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-embedding.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-embedding.png" width="1654" height="736" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<p>For the predictive model to consider only image vectors, we need to move metadata to ... well, meta attributes. We will do this with <strong>Select Columns</strong>.</p>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-select-columns.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-select-columns.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-select-columns.png" width="1138" height="1154" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-workflow2.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-workflow2.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-workflow2.png" width="736" height="422" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<p>Now, we can build our prediction model. Or a couple of them. We will use <strong>Logistic Regression</strong>, <strong>kNN</strong>, and <strong>SVM</strong>, as these are quite successful for working with images. We connect the data and the learners to <strong>Test and Score</strong>. Seems like all of our models are quite accurate, with logistic regression having the highest AUC score.</p>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-test-and-score.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-test-and-score.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-test-and-score.png" width="1554" height="920" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<p>Looking at the <strong>Confusion Matrix</strong>, logistic regression also best distinguishes between Dressels and Gauloises. It makes 13 mistakes, fairly equally confusing Dressels with Gauloises and vice versa. The other two classifiers more frequently confuse Gauloises for Dressels, so they are slightly biased in this sense.</p>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-confusion-matrix.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-confusion-matrix.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-confusion-matrix.png" width="1422" height="722" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-workflow3.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-workflow3.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-workflow3.png" width="1470" height="906" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<p>It always makes sense to check the distribution of misclassifications to determine the quality of the model. If the model just predicts the most frequent class, it is useless. Having more data would surely make this model distinguish between amphora type better.</p>
<p>We can use the model for predicting the type of amphora for unlabelled images. Go to the internet and find some Dressels, Gauloises, and Keays. I have three images here. I put them in a single folder and I will load them with <strong>Import Images</strong> widget. We have to pass the data through another <strong>Image Embedding</strong> widget, because this data too needs numbers. Finally, we pass the data and one of the models (say, logistic regression) to <strong>Predictions</strong>. Don&#x27;t forget, logistic regression needs the data input to word with Predictions (you need to pass the model, not the learner).</p>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-predictions.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-predictions.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-predictions.png" width="1530" height="484" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<p>Seems like Dressel and Gauloise were successfully predicted, while Keay was mislabelled as a Gauloise. Not what we would have expected. Could archaeologists among you figure out, why this Keay amphora was mislabelled?</p>
<img srcSet="/blog/2021-04-archaeology-workshop/2021-04-23-workflow-final.png 1x, /blog/2021-04-archaeology-workshop/2021-04-23-workflow-final.png 2x" src="/blog/2021-04-archaeology-workshop/2021-04-23-workflow-final.png" width="1768" height="1054" decoding="async" data-nimg="1" class="sc-f1463bb7-1 brOllG" loading="lazy" style="color:transparent"/>
<p>In the second part of Data Mining for Archaeologists, we will have a look at geo-tagged data and how to plot them on a map.</p></div></main></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"author":"Ajda Pretnar","date":"2021-04-23","draft":false,"title":"Data Mining for Archaeologists, part I","type":"blog","thumbImage":"2021-04-23-archaeology-small.png","frontPageImage":"2021-04-23-archaeology-small.png","blog":["archaeology","workshop","image analytics","amphorae"],"shortExcerpt":"The many things archaeologists can do in Orange.","longExcerpt":"A workshop about different kinds of analyses archaeologists can do in Orange.","x2images":true},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    strong: \"strong\"\n  }, _provideComponents(), props.components), {LinkNew, WindowScreenshot, WorkflowScreenshot} = _components;\n  if (!LinkNew) _missingMdxReference(\"LinkNew\", true);\n  if (!WindowScreenshot) _missingMdxReference(\"WindowScreenshot\", true);\n  if (!WorkflowScreenshot) _missingMdxReference(\"WorkflowScreenshot\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.p, {\n      children: \"Recently, we held a workshop for a group of archaeologists. While archaeologists are quite well-versed in quantitative analysis, data science was still quite new for most of the participants. Our aim was to introduce basic data science concepts through archaeological use cases. One such case that came to our mind was predicting a type of the artefact from the image.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Related: \", _jsx(LinkNew, {\n        url: \"blog/2018/11/06/data-mining-for-anthropologists/\",\n        name: \"Data Mining for Anthropologists\"\n      })]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We took three best-documented amphora types (types with the highest number of images) from the \", _jsx(_components.a, {\n        href: \"https://archaeologydataservice.ac.uk/archives/view/amphora_ahrb_2005/index.cfm\",\n        children: \"Archaeology Data Service portal\"\n      }), \". We also added some metadata describing each amphora subtype.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"This is how our data looks like.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-data-table.png\",\n      width: \"2652\",\n      height: \"968\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Each row represents one amphora, with type, image URL, subtype, and metadata included. Let us observe the data in an \", _jsx(_components.strong, {\n        children: \"Image Viewer\"\n      }), \" from the \", _jsx(_components.strong, {\n        children: \"Image Analytics\"\n      }), \" add-on.\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-image-viewer.png\",\n      width: \"1754\",\n      height: \"1278\"\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-workflow1.png\",\n      width: \"454\",\n      height: \"360\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Images now have to be converted to numbers, so that predictive models will know how to infer patterns from them. The procedure of describing an image with a vector is called embedding and in Orange, it can be found in \", _jsx(_components.strong, {\n        children: \"Image Embedding\"\n      }), \" widget. We will use a simple, pre-trained Inception v3 model, but it is possible to train custom models specifically for archaeology.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The result of embedding is a long line of numbers.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-embedding.png\",\n      width: \"1654\",\n      height: \"736\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For the predictive model to consider only image vectors, we need to move metadata to ... well, meta attributes. We will do this with \", _jsx(_components.strong, {\n        children: \"Select Columns\"\n      }), \".\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-select-columns.png\",\n      width: \"1138\",\n      height: \"1154\"\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-workflow2.png\",\n      width: \"736\",\n      height: \"422\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Now, we can build our prediction model. Or a couple of them. We will use \", _jsx(_components.strong, {\n        children: \"Logistic Regression\"\n      }), \", \", _jsx(_components.strong, {\n        children: \"kNN\"\n      }), \", and \", _jsx(_components.strong, {\n        children: \"SVM\"\n      }), \", as these are quite successful for working with images. We connect the data and the learners to \", _jsx(_components.strong, {\n        children: \"Test and Score\"\n      }), \". Seems like all of our models are quite accurate, with logistic regression having the highest AUC score.\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-test-and-score.png\",\n      width: \"1554\",\n      height: \"920\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Looking at the \", _jsx(_components.strong, {\n        children: \"Confusion Matrix\"\n      }), \", logistic regression also best distinguishes between Dressels and Gauloises. It makes 13 mistakes, fairly equally confusing Dressels with Gauloises and vice versa. The other two classifiers more frequently confuse Gauloises for Dressels, so they are slightly biased in this sense.\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-confusion-matrix.png\",\n      width: \"1422\",\n      height: \"722\"\n    }), \"\\n\", _jsx(WorkflowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-workflow3.png\",\n      width: \"1470\",\n      height: \"906\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"It always makes sense to check the distribution of misclassifications to determine the quality of the model. If the model just predicts the most frequent class, it is useless. Having more data would surely make this model distinguish between amphora type better.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"We can use the model for predicting the type of amphora for unlabelled images. Go to the internet and find some Dressels, Gauloises, and Keays. I have three images here. I put them in a single folder and I will load them with \", _jsx(_components.strong, {\n        children: \"Import Images\"\n      }), \" widget. We have to pass the data through another \", _jsx(_components.strong, {\n        children: \"Image Embedding\"\n      }), \" widget, because this data too needs numbers. Finally, we pass the data and one of the models (say, logistic regression) to \", _jsx(_components.strong, {\n        children: \"Predictions\"\n      }), \". Don't forget, logistic regression needs the data input to word with Predictions (you need to pass the model, not the learner).\"]\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-predictions.png\",\n      width: \"1530\",\n      height: \"484\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Seems like Dressel and Gauloise were successfully predicted, while Keay was mislabelled as a Gauloise. Not what we would have expected. Could archaeologists among you figure out, why this Keay amphora was mislabelled?\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2021-04-archaeology-workshop/2021-04-23-workflow-final.png\",\n      width: \"1768\",\n      height: \"1054\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In the second part of Data Mining for Archaeologists, we will have a look at geo-tagged data and how to plot them on a map.\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"data-mining-for-archaeologists-part-i"},"buildId":"Z7L00iEto9rZ4XCOOSDzJ","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>