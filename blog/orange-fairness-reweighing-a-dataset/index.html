<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="description" content="Orange Data Mining Toolbox"/><meta property="og:url" content="https://orangedatamining.com"/><meta property="og:site_name" content="Orange Data Mining"/><meta name="author" content="Bioinformatics Laboratory, University of Ljubljana"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/github.min.css"/><title>Orange Data Mining - Orange Fairness - Reweighing a Dataset</title><meta name="robots" content="index,follow"/><meta property="og:title" content="Orange Data Mining - Orange Fairness - Reweighing a Dataset"/><meta property="og:description" content="Introducing the Reweighing widget in Orange, a solution for dataset bias mitigation."/><meta property="og:type" content="article"/><meta property="article:published_time" content="2023-09-19 03:00:00+00:00"/><meta property="article:author" content="Žan Mervič"/><meta property="article:tag" content="fairness"/><meta property="article:tag" content="reweighing"/><meta property="og:image" content="/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-thumb.webp"/><meta property="og:image:width" content="678"/><meta property="og:image:height" content="455"/><meta name="next-head-count" content="19"/><link rel="preload" href="/_next/static/media/e7c7dbb62ddcf6fa-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/148a6a0ea3cd708f.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/148a6a0ea3cd708f.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/4ac7ed34d61ef456.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/4ac7ed34d61ef456.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-21c828b96ad33382.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-0c7baedefba6b077.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-61a1de8ce4711ed8.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-5cf731f7ca37c3f5.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/110-f463c991b9377c97.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f1fbe7543c5d96e5.js" defer="" crossorigin=""></script><script src="/_next/static/mqeKqgdLtMqusMMeZ0kHf/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/mqeKqgdLtMqusMMeZ0kHf/_ssgManifest.js" defer="" crossorigin=""></script><style data-styled="" data-styled-version="5.3.6">.iSNtvJ{position:relative;max-width:1296px;margin-right:auto;margin-left:auto;padding-left:72px;padding-right:72px;height:100%;box-sizing:content-box;}/*!sc*/
@media (max-width:1130px){.iSNtvJ{padding-left:30px;padding-right:30px;}}/*!sc*/
@media (max-width:720px){.iSNtvJ{padding-left:15px;padding-right:15px;}}/*!sc*/
.fJLXpS{position:relative;max-width:1296px;margin-right:auto;margin-left:auto;padding-left:72px;padding-right:72px;height:100%;box-sizing:content-box;max-width:714px;}/*!sc*/
@media (max-width:1130px){.fJLXpS{padding-left:30px;padding-right:30px;}}/*!sc*/
@media (max-width:720px){.fJLXpS{padding-left:15px;padding-right:15px;}}/*!sc*/
data-styled.g1[id="sc-ef15f394-0"]{content:"iSNtvJ,fJLXpS,"}/*!sc*/
.jyxOJT{position:relative;display:inline-block;max-width:100%;font-size:20px;line-height:1.25;font-weight:600;-webkit-text-decoration:none;text-decoration:none;color:#fff;padding:10px 15px;border-radius:5px;background-image:linear-gradient(180deg,#FE7A00 74.93%,#F65D18 100%);box-shadow:0px 10px 10px rgba(0,0,0,0.03);background-size:100%;cursor:pointer;z-index:2;}/*!sc*/
@media (max-width:720px){.jyxOJT{font-size:18px;}}/*!sc*/
.jyxOJT:before{content:"";display:block;position:absolute;top:0;left:0;width:100%;height:100%;border-radius:inherit;background-image:linear-gradient(180deg,#ffbc44 100%,#FE7A00 100%);opacity:0;z-index:-100;-webkit-transition:opacity 0.45s;transition:opacity 0.45s;}/*!sc*/
.jyxOJT:hover{color:#fff;}/*!sc*/
.jyxOJT:hover:before{opacity:1;}/*!sc*/
data-styled.g2[id="sc-b6ea565a-0"]{content:"jyxOJT,"}/*!sc*/
.iQtqNS{background:#1F1F1F;padding:38px 0 25px;color:#fff;}/*!sc*/
data-styled.g3[id="sc-c82ca4e2-0"]{content:"iQtqNS,"}/*!sc*/
.iiCJUO{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-column-gap:80px;column-gap:80px;row-gap:40px;margin-bottom:40px;}/*!sc*/
@media (max-width:720px){.iiCJUO{display:grid;grid-template-columns:1fr 1fr;-webkit-column-gap:20px;column-gap:20px;}}/*!sc*/
.iiCJUO h3{font-size:16px;font-weight:600;margin-bottom:12px;}/*!sc*/
.iiCJUO li + li{margin-top:12px;}/*!sc*/
data-styled.g4[id="sc-c82ca4e2-1"]{content:"iiCJUO,"}/*!sc*/
.eWdALT{display:none;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:44px;height:34px;padding:6px;border-radius:5px;border:none;background:linear-gradient(180deg,#FE7A00 74.93%,#F65D18 100%);box-shadow:0px 10px 10px rgba(0,0,0,0.03);cursor:pointer;margin-left:auto;}/*!sc*/
@media (max-width:920px){.eWdALT{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}/*!sc*/
.eWdALT div{width:22px;height:2px;background:#fff;-webkit-transform-origin:1px;-ms-transform-origin:1px;transform-origin:1px;-webkit-transition:all 0.3s linear;transition:all 0.3s linear;}/*!sc*/
data-styled.g5[id="sc-46d6b9d9-0"]{content:"eWdALT,"}/*!sc*/
.jTcDmc{-webkit-clip:rect(0 0 0 0);clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;}/*!sc*/
data-styled.g6[id="sc-cdea7863-0"]{content:"jTcDmc,"}/*!sc*/
.klNjip{height:80px;background:#fff;box-shadow:0px 4px 10px 4px rgba(0,0,0,0.04);}/*!sc*/
data-styled.g7[id="sc-bac7f990-0"]{content:"klNjip,"}/*!sc*/
.hOqLDN{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;}/*!sc*/
.hOqLDN .img-logo{width:115px;}/*!sc*/
data-styled.g8[id="sc-bac7f990-1"]{content:"hOqLDN,"}/*!sc*/
.cqbOTb{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:920px){.cqbOTb{display:block;position:absolute;top:80px;left:0;width:100%;z-index:1;padding:0 30px 30px;background-color:#fff;opacity:0;z-index:-9999;pointer-events:none;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;box-shadow:0 4px 10px -1px rgba(0,0,0,0.04);}}/*!sc*/
@media (max-width:720px){.cqbOTb{padding:0 15px 15px;}}/*!sc*/
data-styled.g9[id="sc-bac7f990-2"]{content:"cqbOTb,"}/*!sc*/
.iRcXLS{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
@media (max-width:920px){.iRcXLS{display:block;margin-bottom:15px;}}/*!sc*/
.iRcXLS li + li{margin-left:26px;}/*!sc*/
@media (max-width:920px){.iRcXLS li + li{margin-left:0;}}/*!sc*/
.iRcXLS a{display:inline-block;font-size:1.25rem;line-height:1;color:#000000;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:color 0.3s;transition:color 0.3s;}/*!sc*/
.iRcXLS a:hover{color:#FE7A00;}/*!sc*/
@media (max-width:920px){.iRcXLS a{padding:8px 0;}}/*!sc*/
data-styled.g10[id="sc-bac7f990-3"]{content:"iRcXLS,"}/*!sc*/
.kSHWdx{position:relative;width:160px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:width 0.3s ease-in-out;transition:width 0.3s ease-in-out;margin-left:26px;}/*!sc*/
@media (max-width:920px){.kSHWdx{width:auto;margin-left:0;}}/*!sc*/
data-styled.g11[id="sc-bac7f990-4"]{content:"kSHWdx,"}/*!sc*/
.hXYwkT{display:inline-block;position:absolute;top:0;right:42px;width:calc(100% - 42px);height:100%;font-size:16px;line-height:1.25;padding:10px 13px;background:#fff;border-radius:5px 0px 0px 5px;border:1px solid #D9D9D9;border-right:none;-webkit-transition:width 0.3s ease-in-out;transition:width 0.3s ease-in-out;}/*!sc*/
@media (max-width:920px){.hXYwkT{display:none;}}/*!sc*/
.hXYwkT::-webkit-input-placeholder{color:#D9D9D9;}/*!sc*/
.hXYwkT::-moz-placeholder{color:#D9D9D9;}/*!sc*/
.hXYwkT:-ms-input-placeholder{color:#D9D9D9;}/*!sc*/
.hXYwkT::placeholder{color:#D9D9D9;}/*!sc*/
data-styled.g12[id="sc-bac7f990-5"]{content:"hXYwkT,"}/*!sc*/
.lfAUtN{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#fff;margin-left:auto;-webkit-flex:0 0 42px;-ms-flex:0 0 42px;flex:0 0 42px;height:41px;border:1px solid #474747;border-radius:0px 5px 5px 0px;background-color:#474747;}/*!sc*/
@media (max-width:920px){.lfAUtN{margin-left:0;}}/*!sc*/
data-styled.g13[id="sc-bac7f990-6"]{content:"lfAUtN,"}/*!sc*/
.eBQFeB{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
data-styled.g18[id="sc-da66f971-0"]{content:"eBQFeB,"}/*!sc*/
*,*:before,*:after{box-sizing:border-box;-webkit-font-smoothing:antialiased;}/*!sc*/
html,body{height:100%;margin:0;}/*!sc*/
html{font-family:'Source Sans Pro',sans-serif;font-weight:400;color:#000000;}/*!sc*/
body{background:#fff;}/*!sc*/
body,h1,h2,h3,h4,h5,h6,p,ol,ul{margin:0;padding:0;font-weight:normal;}/*!sc*/
main{-webkit-flex:1;-ms-flex:1;flex:1;}/*!sc*/
ol,ul{list-style:none;}/*!sc*/
figure{margin:0;}/*!sc*/
img,video{display:block;max-width:100%;height:auto;}/*!sc*/
a{color:unset;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
a:hover{color:unset;}/*!sc*/
strong{font-weight:600;}/*!sc*/
pre{display:block;padding:20px;margin:0 0 10px;font-size:14px;line-height:1.42857143;word-break:break-all;word-wrap:break-word;color:#000;border:1px solid #ebebeb;border-radius:5px;overflow-x:auto;word-wrap:normal;}/*!sc*/
pre code{padding:0 !important;font-size:inherit;color:inherit;white-space:pre-wrap;background-color:transparent;border-radius:0;border:none;}/*!sc*/
code{padding:2px 3px;background:#f7f7f7;border:1px solid #ededed;border-radius:0.375rem;display:inline-block;line-height:1.2;margin:0;font-size:82%;}/*!sc*/
::selection{background-color:#FE7A00;color:#fff;}/*!sc*/
.lg-container .lg-backdrop.in{opacity:0.75;}/*!sc*/
.lg-container .lg-toolbar.lg-group,.lg-container .lg-outer .lg-thumb-outer{background:rgba(0,0,0,0.45);}/*!sc*/
data-styled.g19[id="sc-global-dTKGWS1"]{content:"sc-global-dTKGWS1,"}/*!sc*/
.KDZEp h1{font-size:44px;line-height:1.13;font-weight:700;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.KDZEp h1{font-size:38px;}}/*!sc*/
@media (max-width:720px){.KDZEp h1{font-size:32px;}}/*!sc*/
.KDZEp h2{font-size:33px;line-height:1.13;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.KDZEp h2{font-size:30px;}}/*!sc*/
@media (max-width:720px){.KDZEp h2{font-size:26px;}}/*!sc*/
.KDZEp h3{font-size:28px;line-height:1.18;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.KDZEp h3{font-size:26px;}}/*!sc*/
@media (max-width:720px){.KDZEp h3{font-size:24px;}}/*!sc*/
.KDZEp h4{font-size:22px;line-height:1.18;font-weight:600;color:#1F1F1F;}/*!sc*/
@media (max-width:720px){.KDZEp h4{font-size:20px;}}/*!sc*/
.KDZEp p{font-size:20px;line-height:1.4;color:#1F1F1F;}/*!sc*/
@media (max-width:1130px){.KDZEp p{font-size:20px;}}/*!sc*/
@media (max-width:920px){.KDZEp p{font-size:18px;}}/*!sc*/
.KDZEp ul,.KDZEp ol{padding-left:40px;}/*!sc*/
.KDZEp ul li,.KDZEp ol li{font-size:20px;line-height:1.4;color:#1F1F1F;}/*!sc*/
@media (max-width:1130px){.KDZEp ul li,.KDZEp ol li{font-size:20px;}}/*!sc*/
@media (max-width:920px){.KDZEp ul li,.KDZEp ol li{font-size:18px;}}/*!sc*/
.KDZEp ul li + li,.KDZEp ol li + li{margin-top:4px;}/*!sc*/
.KDZEp ul{list-style:disc;}/*!sc*/
.KDZEp ol{list-style:decimal;}/*!sc*/
.KDZEp p a,.KDZEp li a{color:#FE7A00;}/*!sc*/
.KDZEp p a:hover,.KDZEp li a:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
.KDZEp * + *:not(li,a,code){margin-top:20px;}/*!sc*/
.KDZEp * + a[data-gallery],.KDZEp * + video{margin-top:40px;}/*!sc*/
.KDZEp a[data-gallery]{display:block;margin-bottom:40px;}/*!sc*/
.KDZEp iframe,.KDZEp video{margin-bottom:40px;}/*!sc*/
data-styled.g20[id="sc-1a44a5f6-0"]{content:"KDZEp,"}/*!sc*/
.cwKbMH{display:block;margin-left:auto;margin-right:auto;}/*!sc*/
data-styled.g21[id="sc-1a44a5f6-1"]{content:"cwKbMH,"}/*!sc*/
.cXdfZy{font-size:62px;line-height:1.04;font-weight:700;color:#fff;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.cXdfZy{font-size:50px;}}/*!sc*/
@media (max-width:720px){.cXdfZy{font-size:42px;}}/*!sc*/
data-styled.g23[id="sc-4d34df46-0"]{content:"cXdfZy,"}/*!sc*/
.gCMEWD{padding:80px 0;}/*!sc*/
@media (max-width:920px){.gCMEWD{padding:60px 0;}}/*!sc*/
@media (max-width:720px){.gCMEWD{padding:40px 0;}}/*!sc*/
data-styled.g30[id="sc-d99538e1-0"]{content:"gCMEWD,"}/*!sc*/
.gSybOC{margin-bottom:30px;}/*!sc*/
data-styled.g31[id="sc-d99538e1-1"]{content:"gSybOC,"}/*!sc*/
.jttBvH{position:relative;}/*!sc*/
data-styled.g32[id="sc-d99538e1-2"]{content:"jttBvH,"}/*!sc*/
.dbPTsj{position:absolute;top:0;right:100%;width:200px;margin-right:50px;text-align:right;}/*!sc*/
@media (max-width:1130px){.dbPTsj{position:unset;width:auto;text-align:left;margin:0 0 30px 0;}}/*!sc*/
data-styled.g33[id="sc-d99538e1-3"]{content:"dbPTsj,"}/*!sc*/
.jFYhEh{font-size:20px;line-height:1.25;color:#1F1F1F;text-transform:capitalize;color:#5651EC;}/*!sc*/
@media (max-width:920px){.jFYhEh{font-size:18px;}}/*!sc*/
.dYEBIG{font-size:20px;line-height:1.25;color:#1F1F1F;}/*!sc*/
@media (max-width:920px){.dYEBIG{font-size:18px;}}/*!sc*/
data-styled.g34[id="sc-d99538e1-4"]{content:"jFYhEh,dYEBIG,"}/*!sc*/
</style></head><body><div id="__next"><div class="sc-da66f971-0 eBQFeB __className_667be3"><nav class="sc-bac7f990-0 klNjip"><div class="sc-ef15f394-0 iSNtvJ"><div class="sc-bac7f990-1 hOqLDN"><a href="/"><img alt="Orange Logo" loading="lazy" width="120" height="35" decoding="async" data-nimg="1" class="img-logo" style="color:transparent" src="/_next/static/media/logo-orange.faff1861.svg"/></a><div><button aria-label="Toggle navigation" class="sc-46d6b9d9-0 eWdALT"><div></div><div></div><div></div></button><div class="sc-bac7f990-2 cqbOTb"><ul class="sc-bac7f990-3 iRcXLS"><li><a href="/examples/">Examples</a></li><li><a href="/download/">Download</a></li><li><a href="/blog/">Blog</a></li><li><a href="/docs/">Docs</a></li><li><a href="/workshops/">Workshops</a></li></ul><form class="sc-bac7f990-4 kSHWdx"><div class="sc-bac7f990-5 hXYwkT">Search</div><button class="sc-bac7f990-6 lfAUtN"><img alt="Icon for search" loading="lazy" width="18" height="17" decoding="async" data-nimg="1" style="color:transparent" src="/_next/static/media/icon-search.459b2665.svg"/><span class="sc-cdea7863-0 jTcDmc">Search through page</span></button></form></div></div></div></div></nav><main><div class="sc-d99538e1-0 gCMEWD"><div class="sc-ef15f394-0 fJLXpS"><div class="sc-d99538e1-1 gSybOC"><p class="sc-d99538e1-4 jFYhEh"><strong>fairness, reweighing</strong></p><h1 class="sc-4d34df46-0 cXdfZy">Orange Fairness - Reweighing a Dataset</h1></div><div class="sc-d99538e1-2 jttBvH"><div class="sc-d99538e1-3 dbPTsj"><p class="sc-d99538e1-4 dYEBIG"><strong>Žan Mervič</strong></p><p class="sc-d99538e1-4 dYEBIG">Sep 19, 2023</p></div><div class="sc-1a44a5f6-0 KDZEp"><div class="lg-react-element "><p>In the <a href="/blog/2023-09-18-fairness-dataset-bias/">previous blog post</a>, we introduced the Orange fairness addon along with the Dataset Bias and As Fairness widgets. We also demonstrated how to use them to detect bias in a dataset and visualized the results for a better understanding. In this blog, we will introduce the Reweighing widget, which we can use to mitigate bias in a dataset, resulting in fairer machine learning models learning from it.</p>
<h3>Reweighing:</h3>
<p>The Reweighing widget offers a solution to mitigate bias in datasets by assigning weights to individual instances. These weights are determined using the <a href="https://link.springer.com/article/10.1007/s10115-011-0463-8">Reweighing algorithm</a>. Essentially, the algorithm gives higher weights to underrepresented pairs of protected attributes and classes and reduces weights for overrepresented ones. This strategy encourages the model to prioritize learning from underrepresented groups while de-emphasizing overrepresented groups. In Orange, we can use the Reweighing widget in two ways:</p>
<ul>
<li>
<p><strong>Reweighing a dataset:</strong> The widget can be used to reweigh a dataset, which we can then use to train a model. Simply connect your dataset to the widget, and the output will be a dataset with appropriately weighted instances.</p>
</li>
<li>
<p><strong>Reweighing as a preprocessor:</strong> The widget can function as a preprocessor for a specific model. By connecting the Reweighing widget directly to your chosen model, the dataset is automatically reweighed prior to the training phase.</p>
</li>
</ul>
<h2>Orange use case</h2>
<p>Now that we have grasped how the Reweighing widget functions and its applications, let us explore a real-world example of using it to assign weights to data.</p>
<p>For this illustration, we will use the <a href="https://github.com/propublica/compas-analysis">Compas dataset</a>. The COMPAS dataset, obtained from ProPublica, contains 7,214 cases with 52 attributes, of which 33 are categorical and 20 are numerical. The most frequently used protected attributes are race and gender. The main goal with this dataset is to predict the likelihood of a convict being re-arrested.</p>
<p>Contrary to the example in the previous blog, we will not use the As Fairness widget to select fairness attributes. This is because datasets with a fairness tag come with default fairness attributes. Specifically, for the Compas dataset, &quot;race&quot; is identified as the protected attribute, with &quot;Caucasian&quot; set as the privileged, protected attribute value.</p>
<a href="/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-use-case.webp" data-gallery="true"><img alt="" loading="lazy" width="1126" height="533" decoding="async" data-nimg="1" class="sc-1a44a5f6-1 cwKbMH" style="color:transparent" src="/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-use-case.webp"/></a>
<p>From the results, we can see that after reweighing the dataset, bias decreased substantially, nearing zero. Let us start by highlighting instances with lower or higher weights in the distribution widget to understand how the reweighing process assigned weights. Following this, we will analyze which combinations of protected attributes and classes were allocated these distinct weights.</p>
<a href="/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-distributions.webp" data-gallery="true"><img alt="" loading="lazy" width="987" height="558" decoding="async" data-nimg="1" class="sc-1a44a5f6-1 cwKbMH" style="color:transparent" src="/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-distributions.webp"/></a>
<p>In the distributions widget we selected instances which have been assigned a weight lower than 1.0. Let&#x27;s inspect the selected instances using a box plot widget.</p>
<a href="/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-box-plot.webp" data-gallery="true"><img alt="" loading="lazy" width="1017" height="472" decoding="async" data-nimg="1" class="sc-1a44a5f6-1 cwKbMH" style="color:transparent" src="/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-box-plot.webp"/></a>
<p>The box plot widget reveals that lower weights were given to instances of unprivileged groups with unfavorable class values and privileged groups with favorable class values. The opposite is true for the higher weights. The results show that the reweighing algorithm assigned weights to the instances in a way that will encourage the model to prioritize learning from underrepresented groups while de-emphasizing overrepresented groups.</p>
<p>In the context of the dataset, the reweighing algorithm recognized that there were more instances with the race &quot;Caucasian&quot; and the favorable class value &quot;no&quot; than any other race and the opposite for the unfavorable class value &quot;yes&quot;. Because of this, it assigned the instances with the race &quot;Caucasian&quot; and the class value &quot;no&quot; a lower weight, encouraging the model to focus less on these instances, while giving the instances of other races with the class value &quot;no&quot; a higher weight, encouraging the model to focus more on these instances. The same is true for the class value &quot;yes&quot; but in the opposite direction.</p>
<p>Another way to see the effects of using the Reweighing widget on a dataset is to use a Data Table widget, where we can see that a new meta attribute called weights has been added to the dataset. This attribute contains the weights assigned to each instance.</p>
<a href="/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-data-table.webp" data-gallery="true"><img alt="" loading="lazy" width="838" height="450" decoding="async" data-nimg="1" class="sc-1a44a5f6-1 cwKbMH" style="color:transparent" src="/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-data-table.webp"/></a></div></div></div></div></div></main><footer class="sc-c82ca4e2-0 iQtqNS"><div class="sc-ef15f394-0 iSNtvJ"><div class="sc-c82ca4e2-1 iiCJUO"><div><h3>Orange</h3><ul><li><a href="/faq/">FAQ</a></li><li><a href="/license/">License</a></li><li><a href="/privacy/">Privacy</a></li><li><a href="/citation/">Citation</a></li><li><a href="/contact/">Contact</a></li></ul></div><div><h3>Download</h3><ul><li><a href="/download/#win">Windows</a></li><li><a href="/download/#mac">Mac OS</a></li></ul></div><div><h3>Community</h3><ul><li><a href="https://twitter.com/OrangeDataMiner">Twitter</a></li><li><a href="https://www.facebook.com/orangedatamining">Facebook</a></li><li><a href="https://datascience.stackexchange.com/questions/tagged/orange">Stack Exchange</a></li><li><a href="https://www.youtube.com/channel/UClKKWBe2SCAEyv7ZNGhIe4g">YouTube</a></li><li><a href="https://discord.com/invite/FWrfeXV">Discord</a></li></ul></div><div><h3>Documentation</h3><ul><li><a href="/getting-started/">Get started</a></li><li><a href="/widget-catalogue/">Widgets</a></li><li><a href="https://orange3.readthedocs.io/projects/orange-data-mining-library/en/latest/">Scripting</a></li></ul></div><div><h3>Developers</h3><ul><li><a href="https://github.com/biolab/orange3">GitHub</a></li><li><a href="http://docs.biolab.si/3/development/">Getting started</a></li></ul></div><div><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=A76TAX87ZVR3J" target="_blank" rel="noreferrer" class="sc-b6ea565a-0 jyxOJT">Donate to Orange</a></div></div><p>Copyright © University of Ljubljana</p></div></footer></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"frontmatter":{"author":"Žan Mervič","date":"2023-09-19 03:00:00+00:00","draft":false,"title":"Orange Fairness - Reweighing a Dataset","thumbImage":"2023-09-19-fairness-reweighing-dataset-thumb.png","frontPageImage":"2023-09-19-fairness-reweighing-dataset-thumb.png","blog":["fairness","reweighing"],"shortExcerpt":"Introducing the Reweighing widget in Orange, a solution for dataset bias mitigation.","longExcerpt":"Building on our exploration of the Orange fairness addon, this blog delves into the Reweighing widget. By adjusting weights for dataset instances, the widget addresses bias, focusing on underrepresented groups. Using the Compas dataset as an example, we demonstrate how bias decreases post-reweighting, presenting visual insights into the distribution of adjusted weights and their impact on dataset fairness.","oldUrl":"/blog/2023/2023-09-19-fairness-reweighing-dataset/"},"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    h3: \"h3\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    h2: \"h2\"\n  }, _provideComponents(), props.components), {WindowScreenshot} = _components;\n  if (!WindowScreenshot) _missingMdxReference(\"WindowScreenshot\", true);\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [\"In the \", _jsx(_components.a, {\n        href: \"/blog/2023-09-18-fairness-dataset-bias/\",\n        children: \"previous blog post\"\n      }), \", we introduced the Orange fairness addon along with the Dataset Bias and As Fairness widgets. We also demonstrated how to use them to detect bias in a dataset and visualized the results for a better understanding. In this blog, we will introduce the Reweighing widget, which we can use to mitigate bias in a dataset, resulting in fairer machine learning models learning from it.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"Reweighing:\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"The Reweighing widget offers a solution to mitigate bias in datasets by assigning weights to individual instances. These weights are determined using the \", _jsx(_components.a, {\n        href: \"https://link.springer.com/article/10.1007/s10115-011-0463-8\",\n        children: \"Reweighing algorithm\"\n      }), \". Essentially, the algorithm gives higher weights to underrepresented pairs of protected attributes and classes and reduces weights for overrepresented ones. This strategy encourages the model to prioritize learning from underrepresented groups while de-emphasizing overrepresented groups. In Orange, we can use the Reweighing widget in two ways:\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"Reweighing a dataset:\"\n          }), \" The widget can be used to reweigh a dataset, which we can then use to train a model. Simply connect your dataset to the widget, and the output will be a dataset with appropriately weighted instances.\"]\n        }), \"\\n\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsxs(_components.p, {\n          children: [_jsx(_components.strong, {\n            children: \"Reweighing as a preprocessor:\"\n          }), \" The widget can function as a preprocessor for a specific model. By connecting the Reweighing widget directly to your chosen model, the dataset is automatically reweighed prior to the training phase.\"]\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Orange use case\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Now that we have grasped how the Reweighing widget functions and its applications, let us explore a real-world example of using it to assign weights to data.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For this illustration, we will use the \", _jsx(_components.a, {\n        href: \"https://github.com/propublica/compas-analysis\",\n        children: \"Compas dataset\"\n      }), \". The COMPAS dataset, obtained from ProPublica, contains 7,214 cases with 52 attributes, of which 33 are categorical and 20 are numerical. The most frequently used protected attributes are race and gender. The main goal with this dataset is to predict the likelihood of a convict being re-arrested.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Contrary to the example in the previous blog, we will not use the As Fairness widget to select fairness attributes. This is because datasets with a fairness tag come with default fairness attributes. Specifically, for the Compas dataset, \\\"race\\\" is identified as the protected attribute, with \\\"Caucasian\\\" set as the privileged, protected attribute value.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-09-fairness-reweighing-dataset/2023-09-19-fairness-reweighing-dataset-use-case.png\",\n      width: \"1126\",\n      height: \"533\",\n      src: \"/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-use-case.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"From the results, we can see that after reweighing the dataset, bias decreased substantially, nearing zero. Let us start by highlighting instances with lower or higher weights in the distribution widget to understand how the reweighing process assigned weights. Following this, we will analyze which combinations of protected attributes and classes were allocated these distinct weights.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-09-fairness-reweighing-dataset/2023-09-19-fairness-reweighing-dataset-distributions.png\",\n      width: \"987\",\n      height: \"558\",\n      src: \"/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-distributions.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In the distributions widget we selected instances which have been assigned a weight lower than 1.0. Let's inspect the selected instances using a box plot widget.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-09-fairness-reweighing-dataset/2023-09-19-fairness-reweighing-dataset-box-plot.png\",\n      width: \"1017\",\n      height: \"472\",\n      src: \"/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-box-plot.webp\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"The box plot widget reveals that lower weights were given to instances of unprivileged groups with unfavorable class values and privileged groups with favorable class values. The opposite is true for the higher weights. The results show that the reweighing algorithm assigned weights to the instances in a way that will encourage the model to prioritize learning from underrepresented groups while de-emphasizing overrepresented groups.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"In the context of the dataset, the reweighing algorithm recognized that there were more instances with the race \\\"Caucasian\\\" and the favorable class value \\\"no\\\" than any other race and the opposite for the unfavorable class value \\\"yes\\\". Because of this, it assigned the instances with the race \\\"Caucasian\\\" and the class value \\\"no\\\" a lower weight, encouraging the model to focus less on these instances, while giving the instances of other races with the class value \\\"no\\\" a higher weight, encouraging the model to focus more on these instances. The same is true for the class value \\\"yes\\\" but in the opposite direction.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Another way to see the effects of using the Reweighing widget on a dataset is to use a Data Table widget, where we can see that a new meta attribute called weights has been added to the dataset. This attribute contains the weights assigned to each instance.\"\n    }), \"\\n\", _jsx(WindowScreenshot, {\n      src: \"/blog/2023-09-fairness-reweighing-dataset/2023-09-19-fairness-reweighing-dataset-data-table.png\",\n      width: \"838\",\n      height: \"450\",\n      src: \"/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-data-table.webp\"\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","frontmatter":{},"scope":{}},"thumbImage":{"width":678,"height":455,"src":"/blog/2023-09-fairness-reweighing-dataset/__webp-images__/2023-09-19-fairness-reweighing-dataset-thumb.webp"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"orange-fairness-reweighing-a-dataset"},"buildId":"mqeKqgdLtMqusMMeZ0kHf","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>